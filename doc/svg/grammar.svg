<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="8526pt" height="1702pt"
 viewBox="0.00 0.00 8526.00 1701.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1697.8024)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1697.8024 8522,-1697.8024 8522,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1513" cy="-1675.8024" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1513" y="-1671.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 214</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1513" cy="-1603.8024" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="1513" y="-1599.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;9</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1513,-1657.6338C1513,-1649.9334 1513,-1640.7767 1513,-1632.219"/>
<polygon fill="#000000" stroke="#000000" points="1516.5001,-1632.2156 1513,-1622.2157 1509.5001,-1632.2157 1516.5001,-1632.2156"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1302" cy="-1531.8024" rx="91.3932" ry="18"/>
<text text-anchor="middle" x="1302" y="-1527.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grammar Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.2993,-1590.5965C1441.5354,-1579.4164 1394.1698,-1563.2537 1357.389,-1550.7029"/>
<polygon fill="#000000" stroke="#000000" points="1358.3946,-1547.348 1347.8001,-1547.4309 1356.1339,-1553.9729 1358.3946,-1547.348"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1454" cy="-1531.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1454" y="-1527.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1498.7177,-1586.3732C1491.3641,-1577.3993 1482.2731,-1566.3052 1474.2124,-1556.4684"/>
<polygon fill="#000000" stroke="#000000" points="1476.7899,-1554.0917 1467.7445,-1548.5753 1471.3755,-1558.5285 1476.7899,-1554.0917"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1577" cy="-1531.8024" rx="67.748" ry="18"/>
<text text-anchor="middle" x="1577" y="-1527.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 3&#45;5</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1528.4926,-1586.3732C1536.3741,-1577.5065 1546.0953,-1566.5702 1554.7606,-1556.8218"/>
<polygon fill="#000000" stroke="#000000" points="1557.4005,-1559.12 1561.4282,-1549.3206 1552.1686,-1554.4695 1557.4005,-1559.12"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="2114" cy="-1531.8024" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2114" y="-1527.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 10&#45;104</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1565.5455,-1597.5074C1672.6488,-1584.6764 1916.4702,-1555.4665 2039.7274,-1540.7003"/>
<polygon fill="#000000" stroke="#000000" points="2040.3184,-1544.1546 2049.831,-1539.4899 2039.4857,-1537.2043 2040.3184,-1544.1546"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="1360,-1477.8024 1232,-1477.8024 1232,-1441.8024 1360,-1441.8024 1360,-1477.8024"/>
<text text-anchor="middle" x="1296" y="-1456.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">* Grammar Module</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1300.4859,-1513.6338C1299.8442,-1505.9334 1299.0812,-1496.7767 1298.3681,-1488.219"/>
<polygon fill="#000000" stroke="#000000" points="1301.8529,-1487.8904 1297.5344,-1478.2157 1294.8771,-1488.4718 1301.8529,-1487.8904"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="1405" cy="-1459.8024" rx="27" ry="18"/>
<text text-anchor="middle" x="1405" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1442.3877,-1514.7394C1436.2588,-1505.7337 1428.6257,-1494.5178 1421.8574,-1484.5725"/>
<polygon fill="#000000" stroke="#000000" points="1424.7115,-1482.5453 1416.1917,-1476.2473 1418.9245,-1486.4837 1424.7115,-1482.5453"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1746,-1477.8024 1450,-1477.8024 1450,-1441.8024 1746,-1441.8024 1746,-1477.8024"/>
<text text-anchor="middle" x="1598" y="-1456.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">io.write &quot;Hello from the Node module!\n&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_4&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1582.2992,-1513.6338C1584.5698,-1505.8487 1587.2746,-1496.5753 1589.794,-1487.9371"/>
<polygon fill="#000000" stroke="#000000" points="1593.1894,-1488.7957 1592.6295,-1478.2157 1586.4694,-1486.8356 1593.1894,-1488.7957"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="1832" cy="-1459.8024" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="1832" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parameters</text>
</g>
<!-- section_5&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2063.909,-1519.0132C2015.537,-1506.6629 1942.2804,-1487.9591 1891.0835,-1474.8875"/>
<polygon fill="#000000" stroke="#000000" points="1891.7072,-1471.4346 1881.1521,-1472.3519 1889.9754,-1478.217 1891.7072,-1471.4346"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="1950" cy="-1459.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1950" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2078.4144,-1516.1795C2050.6051,-1503.9705 2012.1762,-1487.0993 1984.6174,-1475.0003"/>
<polygon fill="#000000" stroke="#000000" points="1985.9215,-1471.7504 1975.3581,-1470.9352 1983.1075,-1478.1599 1985.9215,-1471.7504"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="2032" cy="-1459.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2032" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2094.1501,-1514.3732C2083.0588,-1504.6345 2069.1239,-1492.399 2057.2613,-1481.9831"/>
<polygon fill="#000000" stroke="#000000" points="2059.264,-1479.0838 2049.4403,-1475.1158 2054.6454,-1484.3439 2059.264,-1479.0838"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="2114" cy="-1459.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2114" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2114,-1513.6338C2114,-1505.9334 2114,-1496.7767 2114,-1488.219"/>
<polygon fill="#000000" stroke="#000000" points="2117.5001,-1488.2156 2114,-1478.2157 2110.5001,-1488.2157 2117.5001,-1488.2156"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="2379" cy="-1459.8024" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2379" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 20&#45;49</text>
</g>
<!-- section_5&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2162.6051,-1518.5965C2207.6629,-1506.3544 2274.709,-1488.1381 2322.213,-1475.2313"/>
<polygon fill="#000000" stroke="#000000" points="2323.3058,-1478.5614 2332.0382,-1472.5618 2321.4704,-1471.8063 2323.3058,-1478.5614"/>
</g>
<!-- section_15 -->
<g id="node16" class="node">
<title>section_15</title>
<ellipse fill="none" stroke="#000000" cx="4486" cy="-1459.8024" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4486" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 50&#45;73</text>
</g>
<!-- section_5&#45;&gt;section_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;section_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.3457,-1529.6671C2530.6779,-1519.1545 4052.2813,-1472.9676 4410.3513,-1462.0987"/>
<polygon fill="#000000" stroke="#000000" points="4410.7142,-1465.5893 4420.6034,-1461.7875 4410.5018,-1458.5926 4410.7142,-1465.5893"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="6266" cy="-1459.8024" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6266" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 74&#45;104</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.7573,-1530.5754C2682.6857,-1521.9408 5655.4765,-1470.3895 6185.2575,-1461.2026"/>
<polygon fill="#000000" stroke="#000000" points="6185.5417,-1464.6983 6195.4795,-1461.0253 6185.4203,-1457.6993 6185.5417,-1464.6983"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="7364" cy="-1459.8024" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7364" y="-1455.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 105&#45;214</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.7896,-1531.0296C2590.1048,-1526.5774 4657.5746,-1503.5015 6346,-1477.8024 6691.716,-1472.5404 7103.4464,-1464.8109 7278.4778,-1461.4567"/>
<polygon fill="#000000" stroke="#000000" points="7278.7226,-1464.9527 7288.6536,-1461.2615 7278.5883,-1457.954 7278.7226,-1464.9527"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="1432,-1405.8024 1378,-1405.8024 1378,-1369.8024 1432,-1369.8024 1432,-1405.8024"/>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1405,-1441.6338C1405,-1433.9334 1405,-1424.7767 1405,-1416.219"/>
<polygon fill="#000000" stroke="#000000" points="1408.5001,-1416.2156 1405,-1406.2157 1401.5001,-1416.2157 1408.5001,-1416.2156"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1736.5,-1405.8024 1629.5,-1405.8024 1629.5,-1369.8024 1736.5,-1369.8024 1736.5,-1405.8024"/>
<text text-anchor="middle" x="1683" y="-1384.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">** Parameters</text>
</g>
<!-- header_10&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>header_10&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1799.3013,-1444.0017C1778.822,-1434.1056 1752.1118,-1421.1987 1729.4541,-1410.25"/>
<polygon fill="#000000" stroke="#000000" points="1730.8733,-1407.0487 1720.3466,-1405.8491 1727.8277,-1413.3514 1730.8733,-1407.0487"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1782" cy="-1387.8024" rx="27" ry="18"/>
<text text-anchor="middle" x="1782" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_11&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1924.4736,-1448.4217C1919.3634,-1446.1925 1914.0222,-1443.8974 1909,-1441.8024 1868.8583,-1425.0574 1857.711,-1423.5448 1818,-1405.8024 1816.2296,-1405.0114 1814.42,-1404.1804 1812.6005,-1403.3273"/>
<polygon fill="#000000" stroke="#000000" points="1814.0834,-1400.1568 1803.5562,-1398.9615 1811.0403,-1406.4607 1814.0834,-1400.1568"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1854" cy="-1387.8024" rx="27" ry="18"/>
<text text-anchor="middle" x="1854" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2006.5294,-1448.2848C2001.4146,-1446.0669 1996.0574,-1443.8109 1991,-1441.8024 1946.7098,-1424.2128 1933.837,-1424.4928 1890,-1405.8024 1888.2163,-1405.0419 1886.3962,-1404.2348 1884.5687,-1403.4"/>
<polygon fill="#000000" stroke="#000000" points="1886.036,-1400.2222 1875.5024,-1399.0847 1883.0276,-1406.5428 1886.036,-1400.2222"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1926" cy="-1387.8024" rx="27" ry="18"/>
<text text-anchor="middle" x="1926" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_13&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2089.0124,-1448.3584C2083.7629,-1446.0881 2078.2311,-1443.7933 2073,-1441.8024 2024.5286,-1423.3551 2009.9955,-1425.4546 1962,-1405.8024 1960.2055,-1405.0676 1958.3771,-1404.2807 1956.5431,-1403.4614"/>
<polygon fill="#000000" stroke="#000000" points="1957.9977,-1400.2778 1947.4589,-1399.1888 1955.0184,-1406.6122 1957.9977,-1400.2778"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2068" cy="-1387.8024" rx="96.7227" ry="18"/>
<text text-anchor="middle" x="2068" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : grammar_template</text>
</g>
<!-- section_14&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_14&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2328.6868,-1448.1543C2277.0893,-1436.2089 2196.4038,-1417.5293 2138.4642,-1404.1157"/>
<polygon fill="#000000" stroke="#000000" points="2139.1787,-1400.6886 2128.647,-1401.8429 2137.5998,-1407.5082 2139.1787,-1400.6886"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2215" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2215" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_14&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2344.2198,-1444.5331C2316.38,-1432.3107 2277.5246,-1415.2522 2249.7047,-1403.0386"/>
<polygon fill="#000000" stroke="#000000" points="2250.9243,-1399.7516 2240.3609,-1398.9364 2248.1103,-1406.1612 2250.9243,-1399.7516"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2297" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2297" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_14&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2359.1501,-1442.3732C2348.0588,-1432.6345 2334.1239,-1420.399 2322.2613,-1409.9831"/>
<polygon fill="#000000" stroke="#000000" points="2324.264,-1407.0838 2314.4403,-1403.1158 2319.6454,-1412.3439 2324.264,-1407.0838"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2379" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2379" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_14&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2379,-1441.6338C2379,-1433.9334 2379,-1424.7767 2379,-1416.219"/>
<polygon fill="#000000" stroke="#000000" points="2382.5001,-1416.2156 2379,-1406.2157 2375.5001,-1416.2157 2382.5001,-1416.2156"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="2461" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2461" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_14&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.8499,-1442.3732C2409.9412,-1432.6345 2423.8761,-1420.399 2435.7387,-1409.9831"/>
<polygon fill="#000000" stroke="#000000" points="2438.3546,-1412.3439 2443.5597,-1403.1158 2433.736,-1407.0838 2438.3546,-1412.3439"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2543" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2543" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_14&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2413.7802,-1444.5331C2441.62,-1432.3107 2480.4754,-1415.2522 2508.2953,-1403.0386"/>
<polygon fill="#000000" stroke="#000000" points="2509.8897,-1406.1612 2517.6391,-1398.9364 2507.0757,-1399.7516 2509.8897,-1406.1612"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2687" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2687" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_14&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.171,-1448.0741C2489.9899,-1433.8567 2591.2499,-1410.1855 2647.0527,-1397.1407"/>
<polygon fill="#000000" stroke="#000000" points="2647.9826,-1400.5178 2656.9234,-1394.8333 2646.3892,-1393.7016 2647.9826,-1400.5178"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2981" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2981" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_14&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2439.2004,-1452.6024C2561.1237,-1438.0202 2834.525,-1405.321 2939.1657,-1392.8058"/>
<polygon fill="#000000" stroke="#000000" points="2939.8231,-1396.2522 2949.3367,-1391.5894 2938.9918,-1389.3018 2939.8231,-1396.2522"/>
</g>
<!-- header_48 -->
<g id="node49" class="node">
<title>header_48</title>
<ellipse fill="none" stroke="#000000" cx="4307" cy="-1387.8024" rx="46.4563" ry="18"/>
<text text-anchor="middle" x="4307" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : metas</text>
</g>
<!-- section_15&#45;&gt;header_48 -->
<g id="edge48" class="edge">
<title>section_15&#45;&gt;header_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4448.9111,-1444.884C4419.7119,-1433.139 4379.0213,-1416.7719 4348.695,-1404.5736"/>
<polygon fill="#000000" stroke="#000000" points="4349.8244,-1401.2554 4339.2407,-1400.7707 4347.2122,-1407.7497 4349.8244,-1401.2554"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="4404" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4404" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>section_15&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4466.1501,-1442.3732C4455.0588,-1432.6345 4441.1239,-1420.399 4429.2613,-1409.9831"/>
<polygon fill="#000000" stroke="#000000" points="4431.264,-1407.0838 4421.4403,-1403.1158 4426.6454,-1412.3439 4431.264,-1407.0838"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="4486" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4486" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_15&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4486,-1441.6338C4486,-1433.9334 4486,-1424.7767 4486,-1416.219"/>
<polygon fill="#000000" stroke="#000000" points="4489.5001,-1416.2156 4486,-1406.2157 4482.5001,-1416.2157 4489.5001,-1416.2156"/>
</g>
<!-- prose_51 -->
<g id="node52" class="node">
<title>prose_51</title>
<ellipse fill="none" stroke="#000000" cx="4820" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4820" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_51 -->
<g id="edge51" class="edge">
<title>section_15&#45;&gt;prose_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4537.821,-1448.6314C4604.5072,-1434.2559 4718.9677,-1409.5818 4779.5884,-1396.5139"/>
<polygon fill="#000000" stroke="#000000" points="4780.5112,-1399.8954 4789.5491,-1394.3667 4779.0361,-1393.0526 4780.5112,-1399.8954"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="5091" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5091" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_15&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4546.5004,-1452.6024C4669.0313,-1438.0202 4943.795,-1405.321 5048.9572,-1392.8058"/>
<polygon fill="#000000" stroke="#000000" points="5049.6626,-1396.2467 5059.1789,-1391.5894 5048.8353,-1389.2957 5049.6626,-1396.2467"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="5832" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5832" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_15&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4550.4669,-1456.3539C4785.7727,-1443.767 5594.7477,-1400.4935 5789.5538,-1390.0729"/>
<polygon fill="#000000" stroke="#000000" points="5789.8765,-1393.5608 5799.6753,-1389.5315 5789.5026,-1386.5708 5789.8765,-1393.5608"/>
</g>
<!-- header_65 -->
<g id="node66" class="node">
<title>header_65</title>
<ellipse fill="none" stroke="#000000" cx="6090" cy="-1387.8024" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="6090" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_16&#45;&gt;header_65 -->
<g id="edge65" class="edge">
<title>section_16&#45;&gt;header_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6228.2436,-1444.3566C6200.5658,-1433.0339 6162.9158,-1417.6316 6133.8959,-1405.7598"/>
<polygon fill="#000000" stroke="#000000" points="6134.9928,-1402.427 6124.4121,-1401.8801 6132.3423,-1408.9059 6134.9928,-1402.427"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="6199" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6199" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_16&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6249.4382,-1442.0046C6240.8766,-1432.8041 6230.312,-1421.4511 6221.0672,-1411.5165"/>
<polygon fill="#000000" stroke="#000000" points="6223.3742,-1408.8578 6213.9996,-1403.9214 6218.2497,-1413.6264 6223.3742,-1408.8578"/>
</g>
<!-- codeblock_67 -->
<g id="node68" class="node">
<title>codeblock_67</title>
<ellipse fill="none" stroke="#000000" cx="6334" cy="-1387.8024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6334" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 76&#45;81</text>
</g>
<!-- section_16&#45;&gt;codeblock_67 -->
<g id="edge67" class="edge">
<title>section_16&#45;&gt;codeblock_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6282.809,-1442.0046C6291.126,-1433.1984 6301.3054,-1422.4203 6310.3899,-1412.8013"/>
<polygon fill="#000000" stroke="#000000" points="6313.0627,-1415.0688 6317.3844,-1405.3954 6307.9735,-1410.2624 6313.0627,-1415.0688"/>
</g>
<!-- prose_68 -->
<g id="node69" class="node">
<title>prose_68</title>
<ellipse fill="none" stroke="#000000" cx="6487" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6487" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_68 -->
<g id="edge68" class="edge">
<title>section_16&#45;&gt;prose_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6309.6625,-1445.5775C6350.3094,-1432.3351 6410.2836,-1412.796 6449.0006,-1400.1823"/>
<polygon fill="#000000" stroke="#000000" points="6450.418,-1403.4017 6458.8419,-1396.9761 6448.2496,-1396.746 6450.418,-1403.4017"/>
</g>
<!-- codeblock_69 -->
<g id="node70" class="node">
<title>codeblock_69</title>
<ellipse fill="none" stroke="#000000" cx="6679" cy="-1387.8024" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="6679" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 87&#45;102</text>
</g>
<!-- section_16&#45;&gt;codeblock_69 -->
<g id="edge69" class="edge">
<title>section_16&#45;&gt;codeblock_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6324.2969,-1449.6393C6397.755,-1436.833 6524.0965,-1414.8074 6604.4904,-1400.792"/>
<polygon fill="#000000" stroke="#000000" points="6605.2955,-1404.2045 6614.5458,-1399.039 6604.0933,-1397.3085 6605.2955,-1404.2045"/>
</g>
<!-- header_77 -->
<g id="node78" class="node">
<title>header_77</title>
<ellipse fill="none" stroke="#000000" cx="7016" cy="-1387.8024" rx="46.4822" ry="18"/>
<text text-anchor="middle" x="7016" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : define</text>
</g>
<!-- section_17&#45;&gt;header_77 -->
<g id="edge77" class="edge">
<title>section_17&#45;&gt;header_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7306.9246,-1447.9937C7240.2088,-1434.1904 7130.809,-1411.556 7066.8797,-1398.3292"/>
<polygon fill="#000000" stroke="#000000" points="7067.5251,-1394.8887 7057.0234,-1396.29 7066.1069,-1401.7435 7067.5251,-1394.8887"/>
</g>
<!-- prose_78 -->
<g id="node79" class="node">
<title>prose_78</title>
<ellipse fill="none" stroke="#000000" cx="7151" cy="-1387.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7151" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_78 -->
<g id="edge78" class="edge">
<title>section_17&#45;&gt;prose_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7320.3823,-1445.0584C7281.5556,-1431.9339 7225.3565,-1412.937 7188.5059,-1400.4805"/>
<polygon fill="#000000" stroke="#000000" points="7189.25,-1397.0375 7178.6558,-1397.1508 7187.0084,-1403.6689 7189.25,-1397.0375"/>
</g>
<!-- codeblock_79 -->
<g id="node80" class="node">
<title>codeblock_79</title>
<ellipse fill="none" stroke="#000000" cx="7364" cy="-1387.8024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7364" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 107&#45;182</text>
</g>
<!-- section_17&#45;&gt;codeblock_79 -->
<g id="edge79" class="edge">
<title>section_17&#45;&gt;codeblock_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7364,-1441.6338C7364,-1433.9334 7364,-1424.7767 7364,-1416.219"/>
<polygon fill="#000000" stroke="#000000" points="7367.5001,-1416.2156 7364,-1406.2157 7360.5001,-1416.2157 7367.5001,-1416.2156"/>
</g>
<!-- codeblock_80 -->
<g id="node81" class="node">
<title>codeblock_80</title>
<ellipse fill="none" stroke="#000000" cx="7665" cy="-1387.8024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7665" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 184&#45;193</text>
</g>
<!-- section_17&#45;&gt;codeblock_80 -->
<g id="edge80" class="edge">
<title>section_17&#45;&gt;codeblock_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7417.4659,-1447.0132C7467.8809,-1434.9538 7543.6204,-1416.8367 7598.0355,-1403.8205"/>
<polygon fill="#000000" stroke="#000000" points="7599.0255,-1407.1825 7607.9369,-1401.452 7597.397,-1400.3745 7599.0255,-1407.1825"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="8014" cy="-1387.8024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8014" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 196&#45;210</text>
</g>
<!-- section_17&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_17&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7432.6392,-1452.1993C7551.6705,-1439.0143 7796.1532,-1411.9331 7926.9351,-1397.4465"/>
<polygon fill="#000000" stroke="#000000" points="7927.367,-1400.9202 7936.9208,-1396.3404 7926.5962,-1393.9627 7927.367,-1400.9202"/>
</g>
<!-- codeblock_82 -->
<g id="node83" class="node">
<title>codeblock_82</title>
<ellipse fill="none" stroke="#000000" cx="8341" cy="-1387.8024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8341" y="-1383.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 212&#45;214</text>
</g>
<!-- section_17&#45;&gt;codeblock_82 -->
<g id="edge82" class="edge">
<title>section_17&#45;&gt;codeblock_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7436.5481,-1454.6842C7569.9102,-1445.2458 7863.0024,-1424.3651 8110,-1405.8024 8155.9552,-1402.3487 8207.0421,-1398.3813 8249.464,-1395.0516"/>
<polygon fill="#000000" stroke="#000000" points="8249.7974,-1398.5363 8259.4925,-1394.2637 8249.2491,-1391.5578 8249.7974,-1398.5363"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1110.5,-786.4028 793.5,-786.4028 793.5,-730.5998 1110.5,-730.5998 1110.5,-786.4028"/>
<text text-anchor="middle" x="952" y="-739.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">This function takes two parameters, namely:</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1761.4225,-1376.0225C1756.2166,-1373.5435 1750.5297,-1371.2448 1745,-1369.8024 1677.6925,-1352.2457 1174.4312,-1377.1126 1120,-1333.8024 950.1678,-1198.669 945.5585,-901.8133 949.6768,-796.4879"/>
<polygon fill="#000000" stroke="#000000" points="953.1808,-796.473 950.1257,-786.3282 946.1876,-796.164 953.1808,-796.473"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1705,-785.8018 1129,-785.8018 1129,-731.2009 1705,-731.2009 1705,-785.8018"/>
<text text-anchor="middle" x="1417" y="-754.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; grammar_template : &#160;A function with one parameter, which must be =_ENV=.</text>
<text text-anchor="middle" x="1417" y="-739.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; metas : &#160;A map with keys of string and values of Node subclass constructors.</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1832.5116,-1376.487C1827.7845,-1374.1591 1822.7658,-1371.8086 1818,-1369.8024 1772.9185,-1350.8248 1750.9744,-1365.8241 1714,-1333.8024 1537.3851,-1180.8451 1451.773,-896.9953 1425.8208,-795.6527"/>
<polygon fill="#000000" stroke="#000000" points="1429.1932,-794.7121 1423.3567,-785.8698 1422.4052,-796.4218 1429.1932,-794.7121"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1998.5,-786.4028 1723.5,-786.4028 1723.5,-730.5998 1998.5,-730.5998 1998.5,-786.4028"/>
<text text-anchor="middle" x="1861" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">Both of these are reasonably complex.</text>
</g>
<!-- raw_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1924.1248,-1369.6473C1915.2445,-1283.6722 1877.3353,-916.6525 1864.9395,-796.6421"/>
<polygon fill="#000000" stroke="#000000" points="1868.3974,-796.0529 1863.8884,-786.4654 1861.4344,-796.7722 1868.3974,-796.0529"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2173,-776.5013 2017,-776.5013 2017,-740.5013 2173,-740.5013 2173,-776.5013"/>
<text text-anchor="middle" x="2095" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">*** grammar_template</text>
</g>
<!-- header_25&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>header_25&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2068.7789,-1369.6473C2072.574,-1281.1931 2089.1327,-895.2527 2093.782,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2097.2859,-786.871 2094.2179,-776.7301 2090.2924,-786.5708 2097.2859,-786.871"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="2218" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2218" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_26&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2215.0865,-1369.6473C2215.5082,-1281.1931 2217.3481,-895.2527 2217.8647,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2221.3653,-786.7467 2217.9131,-776.7301 2214.3654,-786.7132 2221.3653,-786.7467"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="2295" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2295" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_27&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2296.9423,-1369.6473C2296.6612,-1281.1931 2295.4346,-895.2527 2295.0902,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2298.5898,-786.7189 2295.0579,-776.7301 2291.5898,-786.7412 2298.5898,-786.7189"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2373" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2373" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_28&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2378.8269,-1369.6473C2377.9835,-1281.1931 2374.3038,-895.2527 2373.2707,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2376.7691,-786.6962 2373.1738,-776.7301 2369.7694,-786.763 2376.7691,-786.6962"/>
</g>
<!-- raw_40 -->
<g id="node41" class="node">
<title>raw_40</title>
<ellipse fill="none" stroke="#000000" cx="2456" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2456" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_40 -->
<g id="edge40" class="edge">
<title>prose_29&#45;&gt;raw_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2460.8558,-1369.6473C2460.153,-1281.1931 2457.0865,-895.2527 2456.2256,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2459.7243,-786.7019 2456.1448,-776.7301 2452.7245,-786.7576 2459.7243,-786.7019"/>
</g>
<!-- raw_42 -->
<g id="node43" class="node">
<title>raw_42</title>
<ellipse fill="none" stroke="#000000" cx="2536" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2536" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_42 -->
<g id="edge42" class="edge">
<title>prose_30&#45;&gt;raw_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2542.7981,-1369.6473C2541.8141,-1281.1931 2537.5211,-895.2527 2536.3158,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="2539.8139,-786.6905 2536.2028,-776.7301 2532.8143,-786.7684 2539.8139,-786.6905"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="2812" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2812" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_31&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_31&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2690.6062,-1369.6473C2708.1955,-1281.0956 2785.0056,-894.4023 2806.4321,-786.5323"/>
<polygon fill="#000000" stroke="#000000" points="2809.9237,-786.9187 2808.4391,-776.4284 2803.0578,-785.5548 2809.9237,-786.9187"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3103" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="3103" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_32&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2984.5197,-1369.6473C3001.6868,-1281.0956 3076.6534,-894.4023 3097.5658,-786.5323"/>
<polygon fill="#000000" stroke="#000000" points="3101.0573,-786.9118 3099.5246,-776.4284 3094.1852,-785.5795 3101.0573,-786.9118"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="562,-116.8005 0,-116.8005 0,-30.3998 562,-30.3998 562,-116.8005"/>
<text text-anchor="middle" x="281" y="-69.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The internal function @define creates a custom environment variable, neatly</text>
<text text-anchor="middle" x="281" y="-54.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">sidestepping lua&#39;s pedantic insistance on prepending =local= to all values of </text>
<text text-anchor="middle" x="281" y="-38.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">significance. </text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2219.932,-740.4715C2229.0178,-651.6469 2263.7317,-261.7145 2182,-183.2002 2149.7201,-152.1911 615.3512,-153.2444 571,-147.2002 525.9025,-141.0544 477.7021,-130.4932 433.8062,-119.2592"/>
<polygon fill="#000000" stroke="#000000" points="434.4818,-115.8188 423.9237,-116.7004 432.7271,-122.5953 434.4818,-115.8188"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="1121.5,-100.9006 580.5,-100.9006 580.5,-46.2997 1121.5,-46.2997 1121.5,-100.9006"/>
<text text-anchor="middle" x="851" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">More relevantly, it constructs a full grammar, which will return a table of</text>
<text text-anchor="middle" x="851" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">type Node. </text>
</g>
<!-- raw_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2296.7484,-740.475C2304.9335,-651.667 2335.7389,-261.8017 2254,-183.2002 2208.9667,-139.8954 1191.8211,-156.2258 1130,-147.2002 1067.1194,-138.02 998.0495,-119.8657 944.3643,-103.8852"/>
<polygon fill="#000000" stroke="#000000" points="945.1082,-100.4542 934.5241,-100.9293 943.0943,-107.1583 945.1082,-100.4542"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="1680.5,-116.2012 1139.5,-116.2012 1139.5,-30.9991 1680.5,-30.9991 1680.5,-116.2012"/>
<text text-anchor="middle" x="1410" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">If you stick to =lpeg= patterns, as you should, all array values will be of</text>
<text text-anchor="middle" x="1410" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">Node, as is intended. &#160;Captures will interpolate various other sorts of Lua</text>
<text text-anchor="middle" x="1410" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">values, which will induce halting in some places and silently corrupt</text>
<text text-anchor="middle" x="1410" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">execution in others. </text>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2374.6769,-740.5115C2382.5157,-651.8779 2411.8687,-262.7169 2331,-183.2002 2280.0564,-133.1084 1759.567,-158.369 1689,-147.2002 1646.3102,-140.4436 1600.7046,-129.8813 1558.9977,-118.8459"/>
<polygon fill="#000000" stroke="#000000" points="1559.8904,-115.4617 1549.3257,-116.2601 1558.0824,-122.2242 1559.8904,-115.4617"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2253.5,-116.2012 1698.5,-116.2012 1698.5,-30.9991 2253.5,-30.9991 2253.5,-116.2012"/>
<text text-anchor="middle" x="1976" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">Though as yet poorly thought through, the [[elpatt module][./elpatt]] is</text>
<text text-anchor="middle" x="1976" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">intended to provide only those patterns which are allowed in Grammars, while</text>
<text text-anchor="middle" x="1976" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">expanding the scope of some favorites to properly respect utf&#45;8 and otherwise</text>
<text text-anchor="middle" x="1976" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">behave. </text>
</g>
<!-- raw_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>raw_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2461.0799,-740.7694C2482.0117,-663.61 2553.8646,-353.3582 2409,-183.2002 2365.6761,-132.312 2327.8139,-163.5013 2263,-147.2002 2226.8235,-138.1017 2188.1122,-128.2518 2151.2052,-118.8064"/>
<polygon fill="#000000" stroke="#000000" points="2151.913,-115.3747 2141.3573,-116.2847 2150.1765,-122.156 2151.913,-115.3747"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2736,-93.5022 2272,-93.5022 2272,-53.698 2736,-53.698 2736,-93.5022"/>
<text text-anchor="middle" x="2504" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">There are examples of the format in the [[spec module][./spec]].</text>
</g>
<!-- raw_42&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>raw_42&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2535.1441,-740.1819C2530.7683,-646.5255 2510.8903,-221.0744 2505.4054,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2508.8977,-103.4317 2504.9347,-93.606 2501.9053,-103.7585 2508.8977,-103.4317"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2931.5,-93.5022 2754.5,-93.5022 2754.5,-53.698 2931.5,-53.698 2931.5,-93.5022"/>
<text text-anchor="middle" x="2843" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Special fields include:</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2812.8292,-740.1819C2817.0682,-646.5255 2836.325,-221.0744 2841.6385,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2845.1387,-103.754 2842.0945,-93.606 2838.1458,-103.4375 2845.1387,-103.754"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3498,-132.1003 2950,-132.1003 2950,-15.1 3498,-15.1 3498,-132.1003"/>
<text text-anchor="middle" x="3224" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;START : &#160;a string which must be the same as the starting rule.</text>
<text text-anchor="middle" x="3224" y="-85.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;SUPPRESS : &#160;either a string or an array of strings. These rules will be</text>
<text text-anchor="middle" x="3224" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;removed from the Node. </text>
<text text-anchor="middle" x="3224" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;P : &#160;The lpeg P function. &#160;Recognizes a certain pattern.</text>
<text text-anchor="middle" x="3224" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;V : &#160;The lpeg V function. &#160;Used for non&#45;terminal rvalues in a grammar. </text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3106.1743,-740.5339C3121.1188,-655.9428 3184.8661,-295.111 3211.8536,-142.3529"/>
<polygon fill="#000000" stroke="#000000" points="3215.3614,-142.615 3213.6546,-132.1586 3208.4682,-141.3971 3215.3614,-142.615"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4346.5,-776.5013 4267.5,-776.5013 4267.5,-740.5013 4346.5,-740.5013 4346.5,-776.5013"/>
<text text-anchor="middle" x="4307" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">*** metas</text>
</g>
<!-- header_48&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>header_48&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4307,-1369.6473C4307,-1281.1931 4307,-895.2527 4307,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="4310.5001,-786.73 4307,-776.7301 4303.5001,-786.7301 4310.5001,-786.73"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="4398" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4398" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_49&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_49&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4403.8269,-1369.6473C4402.9835,-1281.1931 4399.3038,-895.2527 4398.2707,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="4401.7691,-786.6962 4398.1738,-776.7301 4394.7694,-786.763 4401.7691,-786.6962"/>
</g>
<!-- raw_57 -->
<g id="node58" class="node">
<title>raw_57</title>
<ellipse fill="none" stroke="#000000" cx="4478" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4478" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_50&#45;&gt;raw_57 -->
<g id="edge57" class="edge">
<title>prose_50&#45;&gt;raw_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4485.7692,-1369.6473C4484.6447,-1281.1931 4479.7385,-895.2527 4478.3609,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="4481.8587,-786.6847 4478.2317,-776.7301 4474.8592,-786.7738 4481.8587,-786.6847"/>
</g>
<!-- raw_59 -->
<g id="node60" class="node">
<title>raw_59</title>
<ellipse fill="none" stroke="#000000" cx="4881" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4881" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_51&#45;&gt;raw_59 -->
<g id="edge59" class="edge">
<title>prose_51&#45;&gt;raw_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4821.7598,-1369.6473C4830.334,-1281.1931 4867.7443,-895.2527 4878.2483,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="4881.7518,-787.0211 4879.233,-776.7301 4874.7845,-786.3457 4881.7518,-787.0211"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="5279" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5279" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_52&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5096.3236,-1369.9823C5122.636,-1281.9058 5238.8072,-893.0406 5270.812,-785.9096"/>
<polygon fill="#000000" stroke="#000000" points="5274.2138,-786.7494 5273.7228,-776.166 5267.5067,-784.7457 5274.2138,-786.7494"/>
</g>
<!-- raw_63 -->
<g id="node64" class="node">
<title>raw_63</title>
<ellipse fill="none" stroke="#000000" cx="5987" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5987" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_63 -->
<g id="edge63" class="edge">
<title>prose_53&#45;&gt;raw_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5836.4717,-1369.6473C5858.3044,-1281.0062 5953.7194,-893.6208 5980.1761,-786.2063"/>
<polygon fill="#000000" stroke="#000000" points="5983.5913,-786.9753 5982.5845,-776.4284 5976.7944,-785.3011 5983.5913,-786.9753"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4113.5,-108.9005 3516.5,-108.9005 3516.5,-38.2998 4113.5,-38.2998 4113.5,-108.9005"/>
<text text-anchor="middle" x="3815" y="-61.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;By default a node will inherit from the Node class. &#160;If you want custom behavior,</text>
<text text-anchor="middle" x="3815" y="-46.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">you must pass in a table of metatable constructors.</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4399.5086,-740.3699C4406.4607,-651.8972 4431.9039,-266.4069 4355,-183.2002 4319.439,-144.7248 4173.4063,-157.3159 4122,-147.2002 4069.5669,-136.8825 4012.5415,-123.748 3962.0275,-111.4389"/>
<polygon fill="#000000" stroke="#000000" points="3962.5601,-107.9661 3952.0148,-108.9892 3960.8965,-114.7655 3962.5601,-107.9661"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="4700.5,-147.3005 4131.5,-147.3005 4131.5,.1003 4700.5,.1003 4700.5,-147.3005"/>
<text text-anchor="middle" x="4416" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">That&#39;s a fairly specific beast. &#160;Any rule defined above will have an =id=</text>
<text text-anchor="middle" x="4416" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">corresonding to the name of the rule. &#160;Unless =SUPPRESS=ed, this will become</text>
<text text-anchor="middle" x="4416" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node. &#160;If the =metas= parameter has a key corresponding to =id=, then it</text>
<text text-anchor="middle" x="4416" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">must return a function taking two parameters:</text>
<text text-anchor="middle" x="4416" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;</text>
<text text-anchor="middle" x="4416" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; node : &#160;The node under construction, which under normal circumstances will</text>
<text text-anchor="middle" x="4416" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;already have the =first= and =last= fields.</text>
<text text-anchor="middle" x="4416" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;: &#160;The entire str the grammar is parsing.</text>
</g>
<!-- raw_57&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>raw_57&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4477.171,-740.0646C4473.8257,-668.3965 4460.2248,-401.5046 4434,-183.2002 4432.9999,-174.8751 4431.8202,-166.216 4430.5508,-157.5765"/>
<polygon fill="#000000" stroke="#000000" points="4433.9779,-156.8304 4429.0248,-147.4647 4427.0563,-157.875 4433.9779,-156.8304"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5287.5,-93.5022 4718.5,-93.5022 4718.5,-53.698 5287.5,-53.698 5287.5,-93.5022"/>
<text text-anchor="middle" x="5003" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Which must return that same node, decorated in whatever fashion is appropriate.</text>
</g>
<!-- raw_59&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>raw_59&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4884.2005,-740.5339C4900.7705,-647.511 4976.845,-220.4331 4997.6998,-103.355"/>
<polygon fill="#000000" stroke="#000000" points="5001.1801,-103.7749 4999.4881,-93.316 4994.2885,-102.5472 5001.1801,-103.7749"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="5882,-108.8005 5306,-108.8005 5306,-38.3997 5882,-38.3997 5882,-108.8005"/>
<text text-anchor="middle" x="5594" y="-77.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">The node will not have a metatable at this point, and the function must attach a</text>
<text text-anchor="middle" x="5594" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">metatable with =__index= equal to some table which itself has the =__index=</text>
<text text-anchor="middle" x="5594" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">Node as some recursive backstop.</text>
</g>
<!-- raw_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5286.9441,-741.2285C5327.4289,-653.2029 5511.2934,-253.4282 5573.4197,-118.3478"/>
<polygon fill="#000000" stroke="#000000" points="5576.68,-119.635 5577.6787,-109.0873 5570.3204,-116.71 5576.68,-119.635"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="6427.5,-108.9005 5900.5,-108.9005 5900.5,-38.2998 6427.5,-38.2998 6427.5,-108.9005"/>
<text text-anchor="middle" x="6164" y="-77.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">You might say the return value must /inherit/ from Node, if we were using</text>
<text text-anchor="middle" x="6164" y="-62.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">a language that did that sort of thing. </text>
</g>
<!-- raw_63&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>raw_63&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.3865,-740.43C5969.5049,-666.2146 5925.3405,-379.5211 6028,-183.2002 6042.392,-155.6777 6067.0373,-132.6344 6091.4277,-114.8916"/>
<polygon fill="#000000" stroke="#000000" points="6093.5171,-117.701 6099.6743,-109.0789 6089.4842,-111.9794 6093.5171,-117.701"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="6137,-776.5013 6037,-776.5013 6037,-740.5013 6137,-740.5013 6137,-776.5013"/>
<text text-anchor="middle" x="6087" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">*** includes</text>
</g>
<!-- header_65&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>header_65&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6089.9135,-1369.6473C6089.4918,-1281.1931 6087.6519,-895.2527 6087.1353,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="6090.6346,-786.7132 6087.0869,-776.7301 6083.6347,-786.7467 6090.6346,-786.7132"/>
</g>
<!-- raw_71 -->
<g id="node72" class="node">
<title>raw_71</title>
<ellipse fill="none" stroke="#000000" cx="6182" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6182" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_66&#45;&gt;raw_71 -->
<g id="edge71" class="edge">
<title>prose_66&#45;&gt;raw_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6198.5096,-1369.6473C6196.12,-1281.1931 6185.6942,-895.2527 6182.7669,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="6186.2613,-786.6319 6182.4924,-776.7301 6179.2638,-786.821 6186.2613,-786.6319"/>
</g>
<!-- leaf_73 -->
<g id="node74" class="node">
<title>leaf_73</title>
<polygon fill="none" stroke="#c0c0c0" points="6467,-793.7017 6227,-793.7017 6227,-723.3009 6467,-723.3009 6467,-793.7017"/>
<text text-anchor="middle" x="6347" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="6347" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; </text>
<text text-anchor="middle" x="6347" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
</g>
<!-- codeblock_67&#45;&gt;leaf_73 -->
<g id="edge73" class="edge">
<title>codeblock_67&#45;&gt;leaf_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6334.375,-1369.6473C6336.1162,-1285.3613 6343.4373,-930.9656 6346.0601,-803.9976"/>
<polygon fill="#000000" stroke="#000000" points="6349.5626,-803.9099 6346.27,-793.8397 6342.5641,-803.7653 6349.5626,-803.9099"/>
</g>
<!-- raw_74 -->
<g id="node75" class="node">
<title>raw_74</title>
<ellipse fill="none" stroke="#000000" cx="6512" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6512" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_68&#45;&gt;raw_74 -->
<g id="edge74" class="edge">
<title>prose_68&#45;&gt;raw_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6487.7212,-1369.6473C6491.2352,-1281.1931 6506.5673,-895.2527 6510.8722,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="6514.376,-786.8612 6511.2758,-776.7301 6507.3815,-786.5832 6514.376,-786.8612"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="6916.5,-870.1021 6557.5,-870.1021 6557.5,-646.9005 6916.5,-646.9005 6916.5,-870.1021"/>
<text text-anchor="middle" x="6737" y="-855.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="6737" y="-839.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="6737" y="-824.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">local V = string.sub( assert( _VERSION ), &#45;4 )</text>
<text text-anchor="middle" x="6737" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local _G = assert( _G )</text>
<text text-anchor="middle" x="6737" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="6737" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="6737" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="6737" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="6737" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="6737" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="6737" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="6737" y="-685.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="6737" y="-670.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local getfenv = assert( getfenv )</text>
<text text-anchor="middle" x="6737" y="-654.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_69&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>codeblock_69&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6680.6733,-1369.6473C6687.198,-1298.8544 6711.2848,-1037.5115 6725.7633,-880.4195"/>
<polygon fill="#000000" stroke="#000000" points="6729.2702,-880.5051 6726.7028,-870.226 6722.2997,-879.8626 6729.2702,-880.5051"/>
</g>
<!-- leaf_72 -->
<g id="node73" class="node">
<title>leaf_72</title>
<polygon fill="none" stroke="#c0c0c0" points="6500,-91.6001 6446,-91.6001 6446,-55.6001 6500,-55.6001 6500,-91.6001"/>
</g>
<!-- raw_71&#45;&gt;leaf_72 -->
<g id="edge72" class="edge">
<title>raw_71&#45;&gt;leaf_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6180.2704,-740.4019C6172.24,-652.0807 6142.0992,-267.196 6218,-183.2002 6283.8389,-110.3395 6356.9014,-205.3971 6436,-147.2002 6450.9304,-136.2152 6460.2268,-117.4877 6465.7669,-101.6732"/>
<polygon fill="#000000" stroke="#000000" points="6469.2072,-102.4022 6468.8866,-91.8122 6462.5332,-100.2908 6469.2072,-102.4022"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="6849.5,-93.5022 6518.5,-93.5022 6518.5,-53.698 6849.5,-53.698 6849.5,-93.5022"/>
<text text-anchor="middle" x="6684" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s the kind of thing I&#39;d like to automate. </text>
</g>
<!-- raw_74&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>raw_74&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6508.1854,-740.4481C6493.4865,-666.3037 6446.2497,-379.8495 6548,-183.2002 6567.0884,-146.3088 6604.6866,-117.5177 6635.5213,-98.7206"/>
<polygon fill="#000000" stroke="#000000" points="6637.6073,-101.5532 6644.4306,-93.4481 6634.0422,-95.529 6637.6073,-101.5532"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="7021,-776.5013 6935,-776.5013 6935,-740.5013 7021,-740.5013 7021,-776.5013"/>
<text text-anchor="middle" x="6978" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">*** define</text>
</g>
<!-- header_77&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>header_77&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7014.9037,-1369.6473C7009.5625,-1281.1931 6986.2577,-895.2527 6979.7142,-786.8893"/>
<polygon fill="#000000" stroke="#000000" points="6983.1972,-786.5009 6979.1007,-776.7301 6976.2099,-786.9229 6983.1972,-786.5009"/>
</g>
<!-- raw_84 -->
<g id="node85" class="node">
<title>raw_84</title>
<ellipse fill="none" stroke="#000000" cx="7066" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="7066" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_78&#45;&gt;raw_84 -->
<g id="edge84" class="edge">
<title>prose_78&#45;&gt;raw_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7132.225,-1372.9022C7121.327,-1363.0715 7108.5026,-1349.1956 7102,-1333.8024 7019.4672,-1138.427 7048.9143,-872.2473 7061.4969,-786.4025"/>
<polygon fill="#000000" stroke="#000000" points="7064.9753,-786.8078 7063.0087,-776.3971 7058.0538,-785.7619 7064.9753,-786.8078"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="7617,-1333.6035 7111,-1333.6035 7111,-183.3991 7617,-183.3991 7617,-1333.6035"/>
<text text-anchor="middle" x="7364" y="-1318.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(id, first, t, last, str, metas, offset)</text>
<text text-anchor="middle" x="7364" y="-1303.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="7364" y="-1287.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.first = first + offset</text>
<text text-anchor="middle" x="7364" y="-1272.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.last &#160;= last + offset &#45; 1</text>
<text text-anchor="middle" x="7364" y="-1257.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.str &#160;&#160;= str</text>
<text text-anchor="middle" x="7364" y="-1241.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if metas[id] then</text>
<text text-anchor="middle" x="7364" y="-1226.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t = metas[id](t, str)</text>
<text text-anchor="middle" x="7364" y="-1210.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;assert(t.id == id)</text>
<text text-anchor="middle" x="7364" y="-1195.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="7364" y="-1180.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="7364" y="-1164.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t, {__index = Node,</text>
<text text-anchor="middle" x="7364" y="-1149.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__tostring = Node.toString})</text>
<text text-anchor="middle" x="7364" y="-1133.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="7364" y="-1118.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.isNode, &quot;failed isNode: &quot; .. id)</text>
<text text-anchor="middle" x="7364" y="-1103.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.str)</text>
<text text-anchor="middle" x="7364" y="-1087.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return t</text>
<text text-anchor="middle" x="7364" y="-1072.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="7364" y="-1024.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; some useful/common lpeg patterns</text>
<text text-anchor="middle" x="7364" y="-1009.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cp = L.Cp</text>
<text text-anchor="middle" x="7364" y="-994.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cc = L.Cc</text>
<text text-anchor="middle" x="7364" y="-978.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ct = L.Ct</text>
<text text-anchor="middle" x="7364" y="-963.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg1_str = L.Carg(1)</text>
<text text-anchor="middle" x="7364" y="-947.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg2_metas = L.Carg(2)</text>
<text text-anchor="middle" x="7364" y="-932.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg3_offset = L.Carg(3)</text>
<text text-anchor="middle" x="7364" y="-885.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="7364" y="-869.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; with lots of syntax sugar</text>
<text text-anchor="middle" x="7364" y="-854.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function define(func, g, e)</text>
<text text-anchor="middle" x="7364" y="-838.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="7364" y="-823.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if e == nil then</text>
<text text-anchor="middle" x="7364" y="-808.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;e = V == &quot; 5.1&quot; and getfenv(func) or _G</text>
<text text-anchor="middle" x="7364" y="-792.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7364" y="-777.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="7364" y="-761.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="7364" y="-746.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="7364" y="-731.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function(name) g[1] = name end,</text>
<text text-anchor="middle" x="7364" y="-715.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function(...)</text>
<text text-anchor="middle" x="7364" y="-700.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="7364" y="-684.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select(&#39;#&#39;, ...) do</text>
<text text-anchor="middle" x="7364" y="-669.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[select(i, ... )] = true</text>
<text text-anchor="middle" x="7364" y="-654.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7364" y="-638.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="7364" y="-623.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;V = L.V,</text>
<text text-anchor="middle" x="7364" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;P = L.P,</text>
<text text-anchor="middle" x="7364" y="-592.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="7364" y="-561.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env_index, { __index = e })</text>
<text text-anchor="middle" x="7364" y="-545.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env, {</text>
<text text-anchor="middle" x="7364" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="7364" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="7364" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] then</text>
<text text-anchor="middle" x="7364" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = val</text>
<text text-anchor="middle" x="7364" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7364" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = (Cc(name) </text>
<text text-anchor="middle" x="7364" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp() </text>
<text text-anchor="middle" x="7364" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Ct(val)</text>
<text text-anchor="middle" x="7364" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp()</text>
<text text-anchor="middle" x="7364" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg1_str</text>
<text text-anchor="middle" x="7364" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg2_metas)</text>
<text text-anchor="middle" x="7364" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg3_offset / make_ast_node</text>
<text text-anchor="middle" x="7364" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7364" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7364" y="-314.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;})</text>
<text text-anchor="middle" x="7364" y="-299.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="7364" y="-283.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="7364" y="-268.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="7364" y="-253.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7364" y="-237.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="7364" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="7364" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="7364" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_79&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>codeblock_79&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7364,-1369.6473C7364,-1362.775 7364,-1354.107 7364,-1343.913"/>
<polygon fill="#000000" stroke="#000000" points="7367.5001,-1343.6806 7364,-1333.6806 7360.5001,-1343.6807 7367.5001,-1343.6806"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="7910.5,-824.2017 7635.5,-824.2017 7635.5,-692.8009 7910.5,-692.8009 7910.5,-824.2017"/>
<text text-anchor="middle" x="7773" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function refineMetas(metas)</text>
<text text-anchor="middle" x="7773" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for _,v in pairs(metas) do</text>
<text text-anchor="middle" x="7773" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not v[&quot;__tostring&quot;] then</text>
<text text-anchor="middle" x="7773" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;v[&quot;__tostring&quot;] = Node.toString</text>
<text text-anchor="middle" x="7773" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7773" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7773" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return metas</text>
<text text-anchor="middle" x="7773" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_80&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>codeblock_80&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7668.1158,-1369.6473C7681.5497,-1291.3697 7734.9661,-980.1193 7759.968,-834.4372"/>
<polygon fill="#000000" stroke="#000000" points="7763.4761,-834.6877 7761.718,-824.2397 7756.5769,-833.5036 7763.4761,-834.6877"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="8413.5,-862.7018 7928.5,-862.7018 7928.5,-654.3008 8413.5,-654.3008 8413.5,-862.7018"/>
<text text-anchor="middle" x="8171" y="-847.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(grammar_template, metas)</text>
<text text-anchor="middle" x="8171" y="-832.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(grammar_template) == &#39;function&#39; then</text>
<text text-anchor="middle" x="8171" y="-816.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local metas = metas or {}</text>
<text text-anchor="middle" x="8171" y="-801.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grammar = define(grammar_template, nil, metas)</text>
<text text-anchor="middle" x="8171" y="-785.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parse = function(str, offset)</text>
<text text-anchor="middle" x="8171" y="-770.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="8171" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return L.match(grammar, str, 1, str, metas, offset) &#45;&#45; other </text>
<text text-anchor="middle" x="8171" y="-739.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8171" y="-724.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return parse</text>
<text text-anchor="middle" x="8171" y="-708.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8171" y="-693.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no way to build grammar out of &quot; .. type(template))</text>
<text text-anchor="middle" x="8171" y="-678.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8171" y="-662.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>codeblock_81&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8018.5294,-1369.6473C8036.4739,-1297.7205 8103.4925,-1029.0909 8142.4463,-872.9527"/>
<polygon fill="#000000" stroke="#000000" points="8145.9459,-873.3839 8144.9707,-862.8341 8139.1541,-871.6894 8145.9459,-873.3839"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="8518,-776.5013 8432,-776.5013 8432,-740.5013 8518,-740.5013 8518,-776.5013"/>
<text text-anchor="middle" x="8475" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_82&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>codeblock_82&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8379.9148,-1371.5495C8395.9726,-1362.7885 8413.1086,-1350.3303 8423,-1333.8024 8532.5046,-1150.8279 8495.9759,-874.9177 8480.4567,-786.6857"/>
<polygon fill="#000000" stroke="#000000" points="8483.8642,-785.8607 8478.6366,-776.6454 8476.9765,-787.1093 8483.8642,-785.8607"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="7093,-91.6001 7039,-91.6001 7039,-55.6001 7093,-55.6001 7093,-91.6001"/>
</g>
<!-- raw_84&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>raw_84&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7066,-740.1819C7066,-646.0016 7066,-216.3039 7066,-101.7393"/>
<polygon fill="#000000" stroke="#000000" points="7069.5001,-101.658 7066,-91.658 7062.5001,-101.658 7069.5001,-101.658"/>
</g>
</g>
</svg>