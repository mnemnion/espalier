<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4224pt" height="1825pt"
 viewBox="0.00 0.00 4223.50 1824.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1820.8022)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1820.8022 4219.5,-1820.8022 4219.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="2426.5" cy="-1798.8022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="2426.5" y="-1794.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 123</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="2426.5" cy="-1726.8022" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="2426.5" y="-1722.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;66</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2426.5,-1780.6336C2426.5,-1772.9332 2426.5,-1763.7766 2426.5,-1755.2189"/>
<polygon fill="#000000" stroke="#000000" points="2430.0001,-1755.2155 2426.5,-1745.2155 2423.0001,-1755.2155 2430.0001,-1755.2155"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="564.5" cy="-1654.8022" rx="114.1572" ry="18"/>
<text text-anchor="middle" x="564.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : ortho 8600: date format</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2366.1327,-1724.468C2102.1121,-1714.2588 1046.1197,-1673.4256 685.739,-1659.4903"/>
<polygon fill="#000000" stroke="#000000" points="685.668,-1655.9851 675.5402,-1659.096 685.3974,-1662.9798 685.668,-1655.9851"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1329.5" cy="-1654.8022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1329.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2367.1316,-1722.9057C2170.0782,-1709.9724 1540.6296,-1668.6594 1371.612,-1657.5662"/>
<polygon fill="#000000" stroke="#000000" points="1371.8173,-1654.0722 1361.6095,-1656.9097 1371.3588,-1661.0572 1371.8173,-1654.0722"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1752.5" cy="-1654.8022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1752.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 7&#45;54</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2369.3259,-1720.6946C2248.2331,-1707.7589 1965.8405,-1677.5923 1829.229,-1662.9988"/>
<polygon fill="#000000" stroke="#000000" points="1829.5668,-1659.5151 1819.2516,-1661.933 1828.8232,-1666.4755 1829.5668,-1659.5151"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="2595.5" cy="-1654.8022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2595.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2461.5169,-1711.8838C2490.4422,-1699.5606 2531.3116,-1682.1488 2560.2899,-1669.803"/>
<polygon fill="#000000" stroke="#000000" points="2561.7989,-1672.9646 2569.627,-1665.8251 2559.0553,-1666.5246 2561.7989,-1672.9646"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="2940.5" cy="-1654.8022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2940.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 58&#45;65</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2481.507,-1719.097C2573.4898,-1706.2122 2758.7308,-1680.2641 2863.5805,-1665.577"/>
<polygon fill="#000000" stroke="#000000" points="2864.3633,-1669.0016 2873.7811,-1664.1481 2863.3922,-1662.0692 2864.3633,-1669.0016"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="3560.5" cy="-1654.8022" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3560.5" y="-1650.6022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 67&#45;123</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2486.2695,-1723.0074C2676.3853,-1710.9365 3267.214,-1673.4236 3481.6917,-1659.8059"/>
<polygon fill="#000000" stroke="#000000" points="3482.165,-1663.283 3491.9231,-1659.1563 3481.7214,-1656.2971 3482.165,-1663.283"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="191,-1259.1016 0,-1259.1016 0,-1223.1016 191,-1223.1016 191,-1259.1016"/>
<text text-anchor="middle" x="95.5" y="-1237.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">* ortho 8600: date format</text>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M452.1212,-1651.157C359.3599,-1645.8493 237.2181,-1632.8139 200.5,-1600.8022 100.6602,-1513.7596 93.2142,-1337.6391 94.3483,-1269.1957"/>
<polygon fill="#000000" stroke="#000000" points="97.8479,-1269.2475 94.5911,-1259.1656 90.85,-1269.078 97.8479,-1269.2475"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="236.5" cy="-1241.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="236.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1297.0553,-1653.7225C1121.407,-1647.8067 291.5329,-1618.93 272.5,-1600.8022 179.9695,-1512.6724 211.8533,-1337.1941 228.7795,-1269.0591"/>
<polygon fill="#000000" stroke="#000000" points="232.2459,-1269.6319 231.3462,-1259.0753 225.4664,-1267.8889 232.2459,-1269.6319"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="2887.5,-1601.003 281.5,-1601.003 281.5,-881.2002 2887.5,-881.2002 2887.5,-1601.003"/>
<text text-anchor="middle" x="1584.5" y="-1585.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">(* Base definitions *)</text>
<text text-anchor="middle" x="1584.5" y="-1570.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">year = positiveYear | negativeYear | &quot;0000&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1538.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">positiveYear = positiveDigit, digit, digit,</text>
<text text-anchor="middle" x="1584.5" y="-1523.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;0&quot;, positiveDigit, digit,</text>
<text text-anchor="middle" x="1584.5" y="-1508.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;00&quot;, positiveDigit, digit</text>
<text text-anchor="middle" x="1584.5" y="-1492.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;000&quot;, positiveDigit ;</text>
<text text-anchor="middle" x="1584.5" y="-1461.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">negativeYear = &quot;&#45;&quot;, positiveYear ;</text>
<text text-anchor="middle" x="1584.5" y="-1429.802" font-family="Inconsolata" font-size="14.00" fill="#000000">monthDay = (&quot;01&quot; | &quot;03&quot; | &quot;05&quot; |&quot;07&quot; |&quot;08&quot; |&quot;10&quot; |&quot;12&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-1414.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;&#45;&quot;, OneThru31 | (&quot;04&quot; | &quot;06&quot; | &quot;09&quot; | &quot;11&quot;), &quot;&#45;&quot;, OneThru30</text>
<text text-anchor="middle" x="1584.5" y="-1399.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;02&#45;&quot;, OneThru29 ;</text>
<text text-anchor="middle" x="1584.5" y="-1367.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">yearMonth = year &quot;&#45;&quot; month ;</text>
<text text-anchor="middle" x="1584.5" y="-1352.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">month = oneThru12 ;</text>
<text text-anchor="middle" x="1584.5" y="-1336.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">day = oneThru31 ;</text>
<text text-anchor="middle" x="1584.5" y="-1321.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">date = year | yearMonth | yearMonthDay ;</text>
<text text-anchor="middle" x="1584.5" y="-1306.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru12 = (&quot;0&quot;, positiveDigit) | &quot;10&quot; | &quot;11&quot; | 12&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1290.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru29 = (&quot;0&quot;, positiveDigit) | ((&quot;1&quot; | &quot;2&quot;), digit);</text>
<text text-anchor="middle" x="1584.5" y="-1275.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru30 = OneThru29 | &quot;30&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1259.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru31 = OneThru30 | &quot;31&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1244.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">digit = positiveDigit | &quot;0&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1229.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">positiveDigit = &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; | &quot;8&quot; | &quot;9&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1197.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4. Date and Time Extensions *)</text>
<text text-anchor="middle" x="1584.5" y="-1182.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.1.1 Extended Format *) yearMonthDay = year, &quot;&#45;&quot;, monthDay ; (* 4.1.1 Levels *)</text>
<text text-anchor="middle" x="1584.5" y="-1166.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">(* For the extension features, two levels are defined: level 1 *) (* and level 2. Each major subsection of section 4 covers a *) (* general feature; some functions covered by that feature are *) (* level 1 and some are level 2. These levels are defined for *) (* the purpose of profiles, which may refer to the levels when *) (* specifying conformance to the profile. *)</text>
<text text-anchor="middle" x="1584.5" y="-1151.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.2.1 Level 1 &#45; Uncertain and/or Approximate Date *) uaDate = yearMonthDay, uaSymbol ;</text>
<text text-anchor="middle" x="1584.5" y="-1136.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">uaSymbol = &quot;?&quot; | &quot;~&quot; | &quot;%&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1120.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">(* Reduced accuracy *)</text>
<text text-anchor="middle" x="1584.5" y="-1105.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">reducedDate = (year | yearMonth), uaSymbol ;</text>
<text text-anchor="middle" x="1584.5" y="-1089.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.2.2 Level 2 &#45; Uncertain and/or Approximate Date *) qualifiedDate = [uaSymbol], year, [uaSymbol], &quot;&#45;&quot;,</text>
<text text-anchor="middle" x="1584.5" y="-1074.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">[uaSymbol], month, [uaSymbol], &quot;&#45;&quot;, [uaSymbol], day, [uaSymbol] ;</text>
<text text-anchor="middle" x="1584.5" y="-1059.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.3.1 Level 1 &#45; Unspecified Date *)</text>
<text text-anchor="middle" x="1584.5" y="-1043.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">unspecifiedDate = (yearMonth, &quot;&#45;XX&quot;) | (year, &quot;&#45;XX&#45;XX&quot;) | &quot;XXXX&#45;XX&#45;XX&quot; ; (* Reduced accuracy *)</text>
<text text-anchor="middle" x="1584.5" y="-1028.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">reduceAccuracyDate = (2 * digit, &quot;XX&quot;) | (3 * digit, &quot;X&quot;)</text>
<text text-anchor="middle" x="1584.5" y="-1012.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">| (&quot;XXXX&quot;, [&quot;&#45;XX&quot;]) | (year, &quot;&#45;XX&quot;) ;</text>
<text text-anchor="middle" x="1584.5" y="-997.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.3.2 Level 2 &#45; Unspecified Date *)</text>
<text text-anchor="middle" x="1584.5" y="-982.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">replacementDate = 4 * (digit | &quot;X&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-966.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">[&quot;&#45;&quot;, 2 * (digit | &quot;X&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-951.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">[&quot;&#45;&quot;, 2 * (digit | &quot;X&quot;)]] ; (* 4.4.1 Level 1 &#45; Before or After *)</text>
<text text-anchor="middle" x="1584.5" y="-935.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">(* This feature is not used in level 1. *)</text>
<text text-anchor="middle" x="1584.5" y="-920.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.4.2 Level 2 &#45; Before or After *)</text>
<text text-anchor="middle" x="1584.5" y="-905.001" font-family="Inconsolata" font-size="14.00" fill="#000000">beforeAfterDate = (&quot;..&quot;, year, [&quot;&#45;&quot;, month, [&quot;&#45;&quot;, day]])</text>
<text text-anchor="middle" x="1584.5" y="-889.601" font-family="Inconsolata" font-size="14.00" fill="#000000">| (year, [&quot;&#45;&quot;, month, [&quot;&#45;&quot;, day]], &quot;..&quot;) ; (* 4.5.1 Level 1 &#45; Enhanced Interval *)</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>codeblock_4&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.1732,-1636.76C1742.3157,-1629.7234 1738.7085,-1620.8406 1734.5063,-1610.4928"/>
<polygon fill="#000000" stroke="#000000" points="1737.6697,-1608.9801 1730.6643,-1601.0318 1731.1841,-1611.6139 1737.6697,-1608.9801"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="2932.5" cy="-1241.1016" rx="27" ry="18"/>
<text text-anchor="middle" x="2932.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_5&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2627.7579,-1653.753C2697.8271,-1650.7562 2860.5366,-1639.6769 2896.5,-1600.8022 2983.0741,-1507.2199 2954.9237,-1335.6748 2939.6047,-1268.8134"/>
<polygon fill="#000000" stroke="#000000" points="2942.9922,-1267.9297 2937.2758,-1259.0094 2936.1817,-1269.5476 2942.9922,-1267.9297"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="3337,-1291.6018 2978,-1291.6018 2978,-1190.6015 3337,-1190.6015 3337,-1291.6018"/>
<text text-anchor="middle" x="3157.5" y="-1276.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local Node &#160;&#160;&#160;= &#160;require &quot;espalier/node&quot;</text>
<text text-anchor="middle" x="3157.5" y="-1261.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local Grammar = &#160;require &quot;espalier/grammar&quot;</text>
<text text-anchor="middle" x="3157.5" y="-1245.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local require = assert(require)</text>
<text text-anchor="middle" x="3157.5" y="-1230.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local L &#160;&#160;&#160;&#160;&#160;&#160;= &#160;require &quot;espalier/elpatt&quot;</text>
<text text-anchor="middle" x="3157.5" y="-1198.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, R, E, V, S &#160;&#160;&#160;= &#160;L.P, L.R, L.E, L.V, L.S</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2949.9638,-1636.76C2980.3096,-1578.9071 3076.1161,-1396.2564 3126.2413,-1300.6948"/>
<polygon fill="#000000" stroke="#000000" points="3129.4002,-1302.2074 3130.9458,-1291.7259 3123.2012,-1298.9558 3129.4002,-1302.2074"/>
</g>
<!-- header_15 -->
<g id="node16" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="3432.5" cy="-1241.1016" rx="77.3865" ry="18"/>
<text text-anchor="middle" x="3432.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : date grammar</text>
</g>
<!-- section_7&#45;&gt;header_15 -->
<g id="edge15" class="edge">
<title>section_7&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3544.0335,-1637.0534C3535.5764,-1627.0686 3525.7613,-1613.9871 3519.5,-1600.8022 3464.6403,-1485.2804 3442.4945,-1331.9424 3435.3562,-1269.4349"/>
<polygon fill="#000000" stroke="#000000" points="3438.8013,-1268.7433 3434.2289,-1259.1859 3431.8433,-1269.5087 3438.8013,-1268.7433"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="3560.5" cy="-1241.1016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3560.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_7&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3560.5,-1636.76C3560.5,-1571.7029 3560.5,-1348.8311 3560.5,-1269.4554"/>
<polygon fill="#000000" stroke="#000000" points="3564.0001,-1269.2388 3560.5,-1259.2388 3557.0001,-1269.2388 3564.0001,-1269.2388"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="3765.5" cy="-1241.1016" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="3765.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 69&#45;119</text>
</g>
<!-- section_7&#45;&gt;codeblock_17 -->
<g id="edge17" class="edge">
<title>section_7&#45;&gt;codeblock_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3575.5951,-1637.0191C3583.8415,-1626.8145 3593.8925,-1613.5341 3601.5,-1600.8022 3671.6953,-1483.3232 3732.0372,-1330.6267 3755.2885,-1268.8483"/>
<polygon fill="#000000" stroke="#000000" points="3758.5982,-1269.9902 3758.8222,-1259.3977 3752.0415,-1267.5385 3758.5982,-1269.9902"/>
</g>
<!-- codeblock_18 -->
<g id="node19" class="node">
<title>codeblock_18</title>
<ellipse fill="none" stroke="#000000" cx="4067.5" cy="-1241.1016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4067.5" y="-1236.9016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 121&#45;123</text>
</g>
<!-- section_7&#45;&gt;codeblock_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;codeblock_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3627.6262,-1649.0635C3703.2641,-1641.4861 3820.3833,-1626.0647 3856.5,-1600.8022 3977.542,-1516.1373 4039.6701,-1337.9521 4059.9077,-1269.0908"/>
<polygon fill="#000000" stroke="#000000" points="4063.3009,-1269.9551 4062.6955,-1259.3776 4056.5725,-1268.0239 4063.3009,-1269.9551"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="423,-502.0008 50,-502.0008 50,-415.4002 423,-415.4002 423,-502.0008"/>
<text text-anchor="middle" x="236.5" y="-438.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">Let&#39;s start with the EBNF for a date, straight from</text>
<text text-anchor="middle" x="236.5" y="-423.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">[[iso][]]:</text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M236.5,-1222.9133C236.5,-1126.133 236.5,-670.1308 236.5,-512.4789"/>
<polygon fill="#000000" stroke="#000000" points="240.0001,-512.0922 236.5,-502.0923 233.0001,-512.0923 240.0001,-512.0922"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="3052.5,-478.6026 2812.5,-478.6026 2812.5,-438.7984 3052.5,-438.7984 3052.5,-478.6026"/>
<text text-anchor="middle" x="2932.5" y="-447.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">Then we translate this into Lua:</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.5,-1222.9133C2932.5,-1120.6937 2932.5,-617.7384 2932.5,-488.8412"/>
<polygon fill="#000000" stroke="#000000" points="2936.0001,-488.5432 2932.5,-478.5432 2929.0001,-488.5433 2936.0001,-488.5432"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="3459.5,-476.7005 3331.5,-476.7005 3331.5,-440.7005 3459.5,-440.7005 3459.5,-476.7005"/>
<text text-anchor="middle" x="3395.5" y="-455.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** date grammar</text>
</g>
<!-- header_15&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>header_15&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3431.6399,-1222.9133C3426.7844,-1120.2396 3402.8093,-613.2621 3396.8452,-487.1457"/>
<polygon fill="#000000" stroke="#000000" points="3400.324,-486.6126 3396.3554,-476.7891 3393.3318,-486.9433 3400.324,-486.6126"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="3504.5" cy="-458.7005" rx="27" ry="18"/>
<text text-anchor="middle" x="3504.5" y="-454.5005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_16&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3559.1982,-1222.9133C3551.842,-1120.1363 3515.4896,-612.2417 3506.5088,-486.7662"/>
<polygon fill="#000000" stroke="#000000" points="3509.9998,-486.5137 3505.7947,-476.7891 3503.0176,-487.0135 3509.9998,-486.5137"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="4055.5,-845.6016 3549.5,-845.6016 3549.5,-71.7994 4055.5,-71.7994 4055.5,-845.6016"/>
<text text-anchor="middle" x="3802.5" y="-830.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _date_fn(_ENV)</text>
<text text-anchor="middle" x="3802.5" y="-798.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;START &quot;date&quot;</text>
<text text-anchor="middle" x="3802.5" y="-767.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;SUPPRESS ( &quot;positiveYear&quot;, &quot;negativeYear&quot;,</text>
<text text-anchor="middle" x="3802.5" y="-752.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;oneThru12&quot;, &quot;oneThru29&quot;,</text>
<text text-anchor="middle" x="3802.5" y="-736.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;oneThru30&quot;, &quot;oneThru31&quot;,</text>
<text text-anchor="middle" x="3802.5" y="-721.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;posDigit&quot;, &quot;digit&quot; )</text>
<text text-anchor="middle" x="3802.5" y="-689.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;date &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;year&quot;</text>
<text text-anchor="middle" x="3802.5" y="-674.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ V&quot;yearMonth&quot;</text>
<text text-anchor="middle" x="3802.5" y="-659.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* V&quot;yearMonthDay&quot;</text>
<text text-anchor="middle" x="3802.5" y="-627.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;year &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;positiveYear&quot; + V&quot;negativeYear&quot; + P&quot;0000&quot;</text>
<text text-anchor="middle" x="3802.5" y="-596.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;positiveYear = P&quot;0&quot; * V&quot;posDigit&quot; * V&quot;digit&quot; * V&quot;digit&quot;</text>
<text text-anchor="middle" x="3802.5" y="-580.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;00&quot; * V&quot;posDigit&quot; * V&quot;digit&quot;</text>
<text text-anchor="middle" x="3802.5" y="-565.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;000&quot; * V&quot;posDigit&quot;</text>
<text text-anchor="middle" x="3802.5" y="-534.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;negativeYear = &#160;P&quot;&#45;&quot; * V&quot;positiveYear&quot;</text>
<text text-anchor="middle" x="3802.5" y="-502.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;monthDay &#160;&#160;&#160;&#160;= (P&quot;01&quot; + P&quot;03&quot; + P&quot;05&quot; + P&quot;07&quot; + &quot;08&quot; + &quot;10&quot; + &quot;12&quot;)</text>
<text text-anchor="middle" x="3802.5" y="-487.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;&#45;&quot; * V&quot;oneThru31&quot;</text>
<text text-anchor="middle" x="3802.5" y="-471.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ (P&quot;04&quot; + P&quot;06&quot; + P&quot;09&quot; + P&quot;11&quot;) *&quot;P&#45;&quot; * V&quot;oneThru30&quot;</text>
<text text-anchor="middle" x="3802.5" y="-456.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;02&quot; * P&quot;&#45;&quot; * V&quot;oneThru29&quot;</text>
<text text-anchor="middle" x="3802.5" y="-425.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;yearMonth &#160;&#160;&#160;= V&quot;year&quot; * P&quot;&#45;&quot; * V&quot;month&quot;</text>
<text text-anchor="middle" x="3802.5" y="-393.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;yearMonthDay = V&quot;year&quot; * P&quot;&#45;&quot; * &#160;V&quot;monthDay&quot;</text>
<text text-anchor="middle" x="3802.5" y="-362.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;month &#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;oneThru12&quot;</text>
<text text-anchor="middle" x="3802.5" y="-330.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;day &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;oneThru31&quot;</text>
<text text-anchor="middle" x="3802.5" y="-299.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru12 &#160;&#160;&#160;= (P&quot;0&quot; * &#160;V&quot;posDigit&quot;) + P&quot;10&quot; + P&quot;11&quot; + P&quot;12&quot;</text>
<text text-anchor="middle" x="3802.5" y="-268.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru29 &#160;&#160;&#160;= (P&quot;0&quot; * P&quot;posDigit&quot;)</text>
<text text-anchor="middle" x="3802.5" y="-252.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ (P&quot;1&quot; + P&quot;2&quot;) * V&quot;digit&quot;;</text>
<text text-anchor="middle" x="3802.5" y="-221.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru30 &#160;&#160;&#160;= V&quot;oneThru29&quot; + P&quot;30&quot;</text>
<text text-anchor="middle" x="3802.5" y="-189.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru31 &#160;&#160;&#160;= V&quot;oneThru30&quot; + P&quot;31&quot;</text>
<text text-anchor="middle" x="3802.5" y="-158.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;digit &#160;&#160;&#160;&#160;&#160;&#160;&#160;= R&quot;09&quot;</text>
<text text-anchor="middle" x="3802.5" y="-127.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;posDigit &#160;&#160;&#160;&#160;= R&quot;19&quot;</text>
<text text-anchor="middle" x="3802.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; (* 4. Date and Time Extensions *)</text>
<text text-anchor="middle" x="3802.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_17&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3766.3601,-1222.9133C3768.8286,-1170.7143 3776.239,-1014.0156 3783.712,-855.9916"/>
<polygon fill="#000000" stroke="#000000" points="3787.2279,-855.7362 3784.2042,-845.582 3780.2357,-855.4055 3787.2279,-855.7362"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="4215.5,-476.7005 4073.5,-476.7005 4073.5,-440.7005 4215.5,-440.7005 4215.5,-476.7005"/>
<text text-anchor="middle" x="4144.5" y="-455.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return _date_fn</text>
</g>
<!-- codeblock_18&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_18&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4069.29,-1222.9133C4079.4048,-1120.1363 4129.3892,-612.2417 4141.7379,-486.7662"/>
<polygon fill="#000000" stroke="#000000" points="4145.2235,-487.0838 4142.7198,-476.7891 4138.2571,-486.3982 4145.2235,-487.0838"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="3531.5,-36 3477.5,-36 3477.5,0 3531.5,0 3531.5,-36"/>
</g>
<!-- raw_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>raw_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3504.5,-440.6029C3504.5,-372.2436 3504.5,-129.4252 3504.5,-46.2174"/>
<polygon fill="#000000" stroke="#000000" points="3508.0001,-46.0052 3504.5,-36.0053 3501.0001,-46.0053 3508.0001,-46.0052"/>
</g>
</g>
</svg>
