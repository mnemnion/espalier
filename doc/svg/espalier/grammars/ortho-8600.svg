<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="5001pt" height="1981pt"
 viewBox="0.00 0.00 5000.50 1980.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1976.6025)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1976.6025 4996.5,-1976.6025 4996.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="2932.5" cy="-1954.6025" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="2932.5" y="-1950.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 166</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="2932.5" cy="-1882.6025" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="2932.5" y="-1878.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;98</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.5,-1936.4338C2932.5,-1928.7334 2932.5,-1919.5768 2932.5,-1911.0191"/>
<polygon fill="#000000" stroke="#000000" points="2936.0001,-1911.0157 2932.5,-1901.0157 2929.0001,-1911.0158 2936.0001,-1911.0157"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="399.5" cy="-1810.6025" rx="114.1572" ry="18"/>
<text text-anchor="middle" x="399.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : ortho 8600: date format</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2871.7644,-1880.8761C2543.0445,-1871.5323 975.0129,-1826.9613 522.1955,-1814.0901"/>
<polygon fill="#000000" stroke="#000000" points="522.1269,-1810.5868 512.0314,-1813.8011 521.9279,-1817.584 522.1269,-1810.5868"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1777.5" cy="-1810.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1777.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2872.8343,-1878.883C2667.8793,-1866.1066 1995.599,-1824.1982 1819.8491,-1813.2424"/>
<polygon fill="#000000" stroke="#000000" points="1819.9064,-1809.7393 1809.708,-1812.6102 1819.4709,-1816.7257 1819.9064,-1809.7393"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="2506.5" cy="-1810.6025" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="2506.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 7&#45;54</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2879.4081,-1873.6292C2803.0002,-1860.7152 2661.8957,-1836.8665 2576.8767,-1822.4971"/>
<polygon fill="#000000" stroke="#000000" points="2577.2382,-1819.0087 2566.7947,-1820.7931 2576.0716,-1825.9108 2577.2382,-1819.0087"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="2932.5" cy="-1810.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2932.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.5,-1864.4338C2932.5,-1856.7334 2932.5,-1847.5768 2932.5,-1839.0191"/>
<polygon fill="#000000" stroke="#000000" points="2936.0001,-1839.0157 2932.5,-1829.0157 2929.0001,-1839.0158 2936.0001,-1839.0157"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="3121.5" cy="-1810.6025" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3121.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 58&#45;67</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2969.8403,-1868.3776C2998.8933,-1857.3098 3039.4922,-1841.8435 3071.3737,-1829.6982"/>
<polygon fill="#000000" stroke="#000000" points="3072.8668,-1832.8749 3080.9656,-1826.0441 3070.3747,-1826.3334 3072.8668,-1832.8749"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="3527.5" cy="-1810.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3527.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 70&#45;98</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2988.7441,-1875.7965C3097.8189,-1862.5975 3337.834,-1833.5536 3457.2124,-1819.1079"/>
<polygon fill="#000000" stroke="#000000" points="3457.8298,-1822.5588 3467.3368,-1817.8827 3456.9888,-1815.6095 3457.8298,-1822.5588"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="4104.5" cy="-1810.6025" rx="70.655" ry="18"/>
<text text-anchor="middle" x="4104.5" y="-1806.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;166</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2992.2309,-1878.933C3187.2667,-1866.9513 3805.5099,-1828.9705 4025.6893,-1815.4441"/>
<polygon fill="#000000" stroke="#000000" points="4026.1033,-1818.9253 4035.8698,-1814.8187 4025.674,-1811.9385 4026.1033,-1818.9253"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="191,-1414.9018 0,-1414.9018 0,-1378.9018 191,-1378.9018 191,-1414.9018"/>
<text text-anchor="middle" x="95.5" y="-1393.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">* ortho 8600: date format</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M321.0335,-1797.4208C273.1557,-1787.8775 217.9079,-1773.682 200.5,-1756.6025 106.5869,-1664.4608 95.5261,-1493.412 95.022,-1425.6364"/>
<polygon fill="#000000" stroke="#000000" points="98.522,-1425.3093 95.0235,-1415.3087 91.522,-1425.3082 98.522,-1425.3093"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="236.5" cy="-1396.9018" rx="27" ry="18"/>
<text text-anchor="middle" x="236.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1744.9637,-1810.023C1528.151,-1806.0911 300.3132,-1782.6933 272.5,-1756.6025 179.3034,-1669.1774 211.5806,-1493.2827 228.6957,-1424.9479"/>
<polygon fill="#000000" stroke="#000000" points="232.1702,-1425.4924 231.2909,-1414.9341 225.394,-1423.7362 232.1702,-1425.4924"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="2887.5,-1756.8032 281.5,-1756.8032 281.5,-1037.0004 2887.5,-1037.0004 2887.5,-1756.8032"/>
<text text-anchor="middle" x="1584.5" y="-1741.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">(* Base definitions *)</text>
<text text-anchor="middle" x="1584.5" y="-1726.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">year = positiveYear | negativeYear | &quot;0000&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1694.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">positiveYear = positiveDigit, digit, digit,</text>
<text text-anchor="middle" x="1584.5" y="-1679.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;0&quot;, positiveDigit, digit,</text>
<text text-anchor="middle" x="1584.5" y="-1663.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;00&quot;, positiveDigit, digit</text>
<text text-anchor="middle" x="1584.5" y="-1648.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;000&quot;, positiveDigit ;</text>
<text text-anchor="middle" x="1584.5" y="-1617.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">negativeYear = &quot;&#45;&quot;, positiveYear ;</text>
<text text-anchor="middle" x="1584.5" y="-1585.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">monthDay = (&quot;01&quot; | &quot;03&quot; | &quot;05&quot; |&quot;07&quot; |&quot;08&quot; |&quot;10&quot; |&quot;12&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-1570.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;&#45;&quot;, OneThru31 | (&quot;04&quot; | &quot;06&quot; | &quot;09&quot; | &quot;11&quot;), &quot;&#45;&quot;, OneThru30</text>
<text text-anchor="middle" x="1584.5" y="-1554.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| &quot;02&#45;&quot;, OneThru29 ;</text>
<text text-anchor="middle" x="1584.5" y="-1523.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">yearMonth = year &quot;&#45;&quot; month ;</text>
<text text-anchor="middle" x="1584.5" y="-1508.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">month = oneThru12 ;</text>
<text text-anchor="middle" x="1584.5" y="-1492.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">day = oneThru31 ;</text>
<text text-anchor="middle" x="1584.5" y="-1477.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">date = year | yearMonth | yearMonthDay ;</text>
<text text-anchor="middle" x="1584.5" y="-1461.802" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru12 = (&quot;0&quot;, positiveDigit) | &quot;10&quot; | &quot;11&quot; | 12&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1446.402" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru29 = (&quot;0&quot;, positiveDigit) | ((&quot;1&quot; | &quot;2&quot;), digit);</text>
<text text-anchor="middle" x="1584.5" y="-1431.002" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru30 = OneThru29 | &quot;30&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1415.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">oneThru31 = OneThru30 | &quot;31&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1400.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">digit = positiveDigit | &quot;0&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1384.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">positiveDigit = &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; | &quot;8&quot; | &quot;9&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1353.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4. Date and Time Extensions *)</text>
<text text-anchor="middle" x="1584.5" y="-1338.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.1.1 Extended Format *) yearMonthDay = year, &quot;&#45;&quot;, monthDay ; (* 4.1.1 Levels *)</text>
<text text-anchor="middle" x="1584.5" y="-1322.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">(* For the extension features, two levels are defined: level 1 *) (* and level 2. Each major subsection of section 4 covers a *) (* general feature; some functions covered by that feature are *) (* level 1 and some are level 2. These levels are defined for *) (* the purpose of profiles, which may refer to the levels when *) (* specifying conformance to the profile. *)</text>
<text text-anchor="middle" x="1584.5" y="-1307.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.2.1 Level 1 &#45; Uncertain and/or Approximate Date *) uaDate = yearMonthDay, uaSymbol ;</text>
<text text-anchor="middle" x="1584.5" y="-1291.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">uaSymbol = &quot;?&quot; | &quot;~&quot; | &quot;%&quot; ;</text>
<text text-anchor="middle" x="1584.5" y="-1276.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">(* Reduced accuracy *)</text>
<text text-anchor="middle" x="1584.5" y="-1261.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">reducedDate = (year | yearMonth), uaSymbol ;</text>
<text text-anchor="middle" x="1584.5" y="-1245.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.2.2 Level 2 &#45; Uncertain and/or Approximate Date *) qualifiedDate = [uaSymbol], year, [uaSymbol], &quot;&#45;&quot;,</text>
<text text-anchor="middle" x="1584.5" y="-1230.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">[uaSymbol], month, [uaSymbol], &quot;&#45;&quot;, [uaSymbol], day, [uaSymbol] ;</text>
<text text-anchor="middle" x="1584.5" y="-1214.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.3.1 Level 1 &#45; Unspecified Date *)</text>
<text text-anchor="middle" x="1584.5" y="-1199.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">unspecifiedDate = (yearMonth, &quot;&#45;XX&quot;) | (year, &quot;&#45;XX&#45;XX&quot;) | &quot;XXXX&#45;XX&#45;XX&quot; ; (* Reduced accuracy *)</text>
<text text-anchor="middle" x="1584.5" y="-1184.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">reduceAccuracyDate = (2 * digit, &quot;XX&quot;) | (3 * digit, &quot;X&quot;)</text>
<text text-anchor="middle" x="1584.5" y="-1168.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">| (&quot;XXXX&quot;, [&quot;&#45;XX&quot;]) | (year, &quot;&#45;XX&quot;) ;</text>
<text text-anchor="middle" x="1584.5" y="-1153.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.3.2 Level 2 &#45; Unspecified Date *)</text>
<text text-anchor="middle" x="1584.5" y="-1137.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">replacementDate = 4 * (digit | &quot;X&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-1122.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">[&quot;&#45;&quot;, 2 * (digit | &quot;X&quot;),</text>
<text text-anchor="middle" x="1584.5" y="-1107.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">[&quot;&#45;&quot;, 2 * (digit | &quot;X&quot;)]] ; (* 4.4.1 Level 1 &#45; Before or After *)</text>
<text text-anchor="middle" x="1584.5" y="-1091.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">(* This feature is not used in level 1. *)</text>
<text text-anchor="middle" x="1584.5" y="-1076.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">(* 4.4.2 Level 2 &#45; Before or After *)</text>
<text text-anchor="middle" x="1584.5" y="-1060.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">beforeAfterDate = (&quot;..&quot;, year, [&quot;&#45;&quot;, month, [&quot;&#45;&quot;, day]])</text>
<text text-anchor="middle" x="1584.5" y="-1045.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">| (year, [&quot;&#45;&quot;, month, [&quot;&#45;&quot;, day]], &quot;..&quot;) ; (* 4.5.1 Level 1 &#45; Enhanced Interval *)</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_4&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2471.2024,-1794.7645C2452.2837,-1786.2757 2426.4813,-1774.6982 2395.5744,-1760.8302"/>
<polygon fill="#000000" stroke="#000000" points="2396.8306,-1757.5578 2386.2741,-1756.6572 2393.965,-1763.9443 2396.8306,-1757.5578"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="2932.5" cy="-1396.9018" rx="27" ry="18"/>
<text text-anchor="middle" x="2932.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_5&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.5,-1792.5603C2932.5,-1727.5031 2932.5,-1504.6313 2932.5,-1425.2556"/>
<polygon fill="#000000" stroke="#000000" points="2936.0001,-1425.039 2932.5,-1415.039 2929.0001,-1425.0391 2936.0001,-1425.039"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="3385.5,-1462.7022 2977.5,-1462.7022 2977.5,-1331.1015 3385.5,-1331.1015 3385.5,-1462.7022"/>
<text text-anchor="middle" x="3181.5" y="-1447.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local Node &#160;&#160;&#160;= &#160;require &quot;espalier/node&quot;</text>
<text text-anchor="middle" x="3181.5" y="-1432.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local Grammar = &#160;require &quot;espalier/grammar&quot;</text>
<text text-anchor="middle" x="3181.5" y="-1416.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local require = assert(require)</text>
<text text-anchor="middle" x="3181.5" y="-1401.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local L &#160;&#160;&#160;&#160;&#160;&#160;= &#160;require &quot;espalier/elpatt&quot;</text>
<text text-anchor="middle" x="3181.5" y="-1386.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node &#160;&#160;&#160;= &#160;require &quot;espalier/node&quot;</text>
<text text-anchor="middle" x="3181.5" y="-1370.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Grammar = &#160;require &quot;espalier/grammar&quot;</text>
<text text-anchor="middle" x="3181.5" y="-1339.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, R, E, V, S, D &#160;&#160;= &#160;L.P, L.R, L.E, L.V, L.S, L.D</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3124.1167,-1792.5603C3132.0542,-1737.8311 3156.1896,-1571.417 3170.5064,-1472.7028"/>
<polygon fill="#000000" stroke="#000000" points="3173.974,-1473.1779 3171.9457,-1462.779 3167.0465,-1472.1731 3173.974,-1473.1779"/>
</g>
<!-- header_16 -->
<g id="node17" class="node">
<title>header_16</title>
<ellipse fill="none" stroke="#000000" cx="3469.5" cy="-1396.9018" rx="65.81" ry="18"/>
<text text-anchor="middle" x="3469.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : metatables</text>
</g>
<!-- section_7&#45;&gt;header_16 -->
<g id="edge16" class="edge">
<title>section_7&#45;&gt;header_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3524.9705,-1792.5603C3515.8496,-1727.5031 3484.6035,-1504.6313 3473.4751,-1425.2556"/>
<polygon fill="#000000" stroke="#000000" points="3476.8974,-1424.4562 3472.0428,-1415.039 3469.9652,-1425.4281 3476.8974,-1424.4562"/>
</g>
<!-- prose_17 -->
<g id="node18" class="node">
<title>prose_17</title>
<ellipse fill="none" stroke="#000000" cx="3585.5" cy="-1396.9018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3585.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_17 -->
<g id="edge17" class="edge">
<title>section_7&#45;&gt;prose_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3534.2091,-1792.3413C3537.7692,-1781.9871 3541.9276,-1768.7164 3544.5,-1756.6025 3570.364,-1634.8043 3580.7509,-1486.1088 3584.1261,-1425.0829"/>
<polygon fill="#000000" stroke="#000000" points="3587.6228,-1425.2358 3584.66,-1415.0636 3580.6327,-1424.8632 3587.6228,-1425.2358"/>
</g>
<!-- codeblock_18 -->
<g id="node19" class="node">
<title>codeblock_18</title>
<ellipse fill="none" stroke="#000000" cx="3737.5" cy="-1396.9018" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3737.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;97</text>
</g>
<!-- section_7&#45;&gt;codeblock_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;codeblock_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3569.0438,-1796.4741C3588.9468,-1787.7927 3611.6292,-1774.7907 3626.5,-1756.6025 3709.7693,-1654.7571 3730.7171,-1490.6808 3735.8674,-1425.207"/>
<polygon fill="#000000" stroke="#000000" points="3739.3594,-1425.4428 3736.5887,-1415.2167 3732.3775,-1424.9386 3739.3594,-1425.4428"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="3976.5" cy="-1396.9018" rx="77.3865" ry="18"/>
<text text-anchor="middle" x="3976.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : date grammar</text>
</g>
<!-- section_8&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4088.0335,-1792.8536C4079.5764,-1782.8688 4069.7613,-1769.7874 4063.5,-1756.6025 4008.6403,-1641.0806 3986.4945,-1487.7426 3979.3562,-1425.2351"/>
<polygon fill="#000000" stroke="#000000" points="3982.8013,-1424.5435 3978.2289,-1414.9861 3975.8433,-1425.3089 3982.8013,-1424.5435"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="4104.5" cy="-1396.9018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4104.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4104.5,-1792.5603C4104.5,-1727.5031 4104.5,-1504.6313 4104.5,-1425.2556"/>
<polygon fill="#000000" stroke="#000000" points="4108.0001,-1425.039 4104.5,-1415.039 4101.0001,-1425.0391 4108.0001,-1425.039"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="4313.5" cy="-1396.9018" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4313.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 101&#45;161</text>
</g>
<!-- section_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4119.5501,-1792.7922C4127.7823,-1782.5791 4137.8343,-1769.2993 4145.5,-1756.6025 4216.533,-1638.9497 4278.8344,-1486.3501 4302.9112,-1424.623"/>
<polygon fill="#000000" stroke="#000000" points="4306.2205,-1425.7695 4306.5718,-1415.1805 4299.6938,-1423.2393 4306.2205,-1425.7695"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="4700.5" cy="-1396.9018" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4700.5" y="-1392.7018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;166</text>
</g>
<!-- section_8&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_8&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4170.9654,-1804.3131C4248.1917,-1796.0652 4370.0718,-1779.8586 4409.5,-1756.6025 4551.2783,-1672.9769 4652.5381,-1492.7494 4687.3014,-1424.1591"/>
<polygon fill="#000000" stroke="#000000" points="4690.6023,-1425.3835 4691.9448,-1414.874 4684.3415,-1422.2525 4690.6023,-1425.3835"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="423,-579.9009 50,-579.9009 50,-493.3003 423,-493.3003 423,-579.9009"/>
<text text-anchor="middle" x="236.5" y="-516.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">Let&#39;s start with the EBNF for a date, straight from</text>
<text text-anchor="middle" x="236.5" y="-501.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">[[iso][]]:</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M236.5,-1378.5352C236.5,-1274.6001 236.5,-758.87 236.5,-590.1333"/>
<polygon fill="#000000" stroke="#000000" points="240.0001,-589.998 236.5,-579.998 233.0001,-589.998 240.0001,-589.998"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="3052.5,-556.5027 2812.5,-556.5027 2812.5,-516.6985 3052.5,-516.6985 3052.5,-556.5027"/>
<text text-anchor="middle" x="2932.5" y="-525.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">Then we translate this into Lua:</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.5,-1378.5352C2932.5,-1269.2352 2932.5,-704.5315 2932.5,-566.882"/>
<polygon fill="#000000" stroke="#000000" points="2936.0001,-566.6559 2932.5,-556.6559 2929.0001,-566.656 2936.0001,-566.6559"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="3514.5,-554.6006 3400.5,-554.6006 3400.5,-518.6006 3514.5,-518.6006 3514.5,-554.6006"/>
<text text-anchor="middle" x="3457.5" y="-533.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">*** metatables</text>
</g>
<!-- header_16&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>header_16&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3469.2438,-1378.5352C3467.7125,-1268.7527 3459.7727,-699.5368 3457.8973,-565.084"/>
<polygon fill="#000000" stroke="#000000" points="3461.393,-564.7455 3457.7538,-554.7953 3454.3937,-564.8432 3461.393,-564.7455"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="3559.5" cy="-536.6006" rx="27" ry="18"/>
<text text-anchor="middle" x="3559.5" y="-532.4006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_17&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_17&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3584.9449,-1378.5352C3581.6271,-1268.7527 3564.4243,-699.5368 3560.3608,-565.084"/>
<polygon fill="#000000" stroke="#000000" points="3563.8505,-564.685 3560.0499,-554.7953 3556.8537,-564.8965 3563.8505,-564.685"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="3894,-725.9013 3605,-725.9013 3605,-347.2999 3894,-347.2999 3894,-725.9013"/>
<text text-anchor="middle" x="3749.5" y="-710.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local Day = Node : inherit ()</text>
<text text-anchor="middle" x="3749.5" y="-695.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">Day.id = &quot;day&quot;</text>
<text text-anchor="middle" x="3749.5" y="-680.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local Month = Node : inherit ()</text>
<text text-anchor="middle" x="3749.5" y="-664.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">Month.id = &quot;month&quot;</text>
<text text-anchor="middle" x="3749.5" y="-649.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local Year = Node : inherit ()</text>
<text text-anchor="middle" x="3749.5" y="-633.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">Year.id = &#160;&quot;year&quot;</text>
<text text-anchor="middle" x="3749.5" y="-602.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local date_metas = { oneThru30 = Day,</text>
<text text-anchor="middle" x="3749.5" y="-587.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;oneThru29 = Day,</text>
<text text-anchor="middle" x="3749.5" y="-571.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;m31 &#160;&#160;&#160;&#160;&#160;&#160;= Month,</text>
<text text-anchor="middle" x="3749.5" y="-556.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;m30 &#160;&#160;&#160;&#160;&#160;&#160;= Month,</text>
<text text-anchor="middle" x="3749.5" y="-540.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mFeb &#160;&#160;&#160;&#160;&#160;= Month,</text>
<text text-anchor="middle" x="3749.5" y="-525.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;year &#160;&#160;&#160;&#160;&#160;= Year }</text>
<text text-anchor="middle" x="3749.5" y="-494.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _post(date)</text>
<text text-anchor="middle" x="3749.5" y="-478.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;date.id = &quot;DATE&quot;</text>
<text text-anchor="middle" x="3749.5" y="-463.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;error &quot;post function callec&quot;</text>
<text text-anchor="middle" x="3749.5" y="-447.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for day in date:select &quot;day&quot; do</text>
<text text-anchor="middle" x="3749.5" y="-432.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if day[1].id == &quot;day&quot; then</text>
<text text-anchor="middle" x="3749.5" y="-417.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;day[1] = nil</text>
<text text-anchor="middle" x="3749.5" y="-401.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3749.5" y="-386.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3749.5" y="-370.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return date</text>
<text text-anchor="middle" x="3749.5" y="-355.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_18&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_18&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3737.7562,-1378.5352C3738.8994,-1296.574 3743.6146,-958.5342 3746.7115,-736.5152"/>
<polygon fill="#000000" stroke="#000000" points="3750.2132,-736.4098 3746.8531,-726.3619 3743.2139,-736.3121 3750.2132,-736.4098"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="3586.5,-36 3532.5,-36 3532.5,0 3586.5,0 3586.5,-36"/>
</g>
<!-- raw_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>raw_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3559.5,-518.4474C3559.5,-441.2775 3559.5,-140.1323 3559.5,-46.1662"/>
<polygon fill="#000000" stroke="#000000" points="3563.0001,-46.0058 3559.5,-36.0058 3556.0001,-46.0059 3563.0001,-46.0058"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="4040.5,-554.6006 3912.5,-554.6006 3912.5,-518.6006 4040.5,-518.6006 4040.5,-554.6006"/>
<text text-anchor="middle" x="3976.5" y="-533.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">*** date grammar</text>
</g>
<!-- header_23&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>header_23&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3976.5,-1378.5352C3976.5,-1268.7527 3976.5,-699.5368 3976.5,-565.084"/>
<polygon fill="#000000" stroke="#000000" points="3980.0001,-564.7953 3976.5,-554.7953 3973.0001,-564.7953 3980.0001,-564.7953"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="4085.5" cy="-536.6006" rx="27" ry="18"/>
<text text-anchor="middle" x="4085.5" y="-532.4006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_24&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4104.0944,-1378.5352C4101.6698,-1268.7527 4089.0985,-699.5368 4086.1291,-565.084"/>
<polygon fill="#000000" stroke="#000000" points="4089.6219,-564.7156 4085.9018,-554.7953 4082.6236,-564.8702 4089.6219,-564.7156"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="4636.5,-1001.3018 4130.5,-1001.3018 4130.5,-71.8994 4636.5,-71.8994 4636.5,-1001.3018"/>
<text text-anchor="middle" x="4383.5" y="-986.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function _date_fn(_ENV)</text>
<text text-anchor="middle" x="4383.5" y="-954.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;START &quot;date&quot;</text>
<text text-anchor="middle" x="4383.5" y="-923.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;SUPPRESS (&quot;positiveYear&quot;, &quot;negativeYear&quot;</text>
<text text-anchor="middle" x="4383.5" y="-907.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;, &quot;yearMonth&quot;, &quot;yearMonthDay&quot;, &quot;monthDay&quot;</text>
<text text-anchor="middle" x="4383.5" y="-892.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; , &quot;oneThru12&quot;, &quot;oneThru29&quot;,</text>
<text text-anchor="middle" x="4383.5" y="-877.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; , &quot;oneThru30&quot;, &quot;oneThru31&quot;</text>
<text text-anchor="middle" x="4383.5" y="-861.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;)</text>
<text text-anchor="middle" x="4383.5" y="-830.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;date &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;yearMonthDay&quot;</text>
<text text-anchor="middle" x="4383.5" y="-814.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ V&quot;yearMonth&quot;</text>
<text text-anchor="middle" x="4383.5" y="-799.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ V&quot;year&quot;</text>
<text text-anchor="middle" x="4383.5" y="-768.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;year &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;positiveYear&quot; + V&quot;negativeYear&quot; + P&quot;0000&quot;</text>
<text text-anchor="middle" x="4383.5" y="-736.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;positiveYear = R&quot;19&quot; &#160;* R&quot;09&quot; * R&quot;09&quot; * R&quot;09&quot;</text>
<text text-anchor="middle" x="4383.5" y="-721.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;0&quot; &#160;&#160;* R&quot;19&quot; * R&quot;09&quot;</text>
<text text-anchor="middle" x="4383.5" y="-705.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;00&quot; &#160;* R&quot;19&quot; * R&quot;09&quot;</text>
<text text-anchor="middle" x="4383.5" y="-690.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;000&quot; * R&quot;19&quot;</text>
<text text-anchor="middle" x="4383.5" y="-659.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;negativeYear = &#160;P&quot;&#45;&quot; * V&quot;positiveYear&quot;</text>
<text text-anchor="middle" x="4383.5" y="-627.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;monthDay &#160;&#160;&#160;&#160;= V&quot;m31&quot; &#160;* P&quot;&#45;&quot; * V&quot;day&quot;</text>
<text text-anchor="middle" x="4383.5" y="-612.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ V&quot;m30&quot; &#160;* P&quot;&#45;&quot; * (&#45;V&quot;longMonth&quot; * V&quot;day&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-596.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ V&quot;mFeb&quot; * P&quot;&#45;&quot; * (&#45;V&quot;threeDecan&quot; * V&quot;day&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-565.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;m31 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= (P&quot;01&quot; + P&quot;03&quot; + P&quot;05&quot; + P&quot;07&quot; + &quot;08&quot; + &quot;10&quot; + &quot;12&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-534.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;m30 &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= (P&quot;04&quot; + P&quot;06&quot; + P&quot;09&quot; + P&quot;11&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-502.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;mFeb &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= P&quot;02&quot;</text>
<text text-anchor="middle" x="4383.5" y="-471.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;yearMonth &#160;&#160;&#160;= V&quot;year&quot; * P&quot;&#45;&quot; * V&quot;month&quot;</text>
<text text-anchor="middle" x="4383.5" y="-439.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;yearMonthDay = V&quot;year&quot; * P&quot;&#45;&quot; * &#160;V&quot;monthDay&quot;</text>
<text text-anchor="middle" x="4383.5" y="-408.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;month &#160;&#160;&#160;&#160;&#160;&#160;&#160;= V&quot;m31&quot; + V&quot;m30&quot; + V&quot;mFeb&quot;</text>
<text text-anchor="middle" x="4383.5" y="-377.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;day &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= (P&quot;0&quot; * R&quot;19&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-361.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ (P&quot;1&quot; + P&quot;2&quot;) * R&quot;09&quot;</text>
<text text-anchor="middle" x="4383.5" y="-346.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;30&quot;</text>
<text text-anchor="middle" x="4383.5" y="-330.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ P&quot;31&quot;</text>
<text text-anchor="middle" x="4383.5" y="-299.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru12 &#160;&#160;&#160;= (P&quot;0&quot; * &#160;R&quot;19&quot;) + P&quot;10&quot; + P&quot;11&quot; + P&quot;12&quot;</text>
<text text-anchor="middle" x="4383.5" y="-268.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru29 &#160;&#160;&#160;= (P&quot;0&quot; * R&quot;19&quot;)</text>
<text text-anchor="middle" x="4383.5" y="-252.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ (P&quot;1&quot; + P&quot;2&quot;) * R&quot;09&quot;</text>
<text text-anchor="middle" x="4383.5" y="-221.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru30 &#160;&#160;&#160;= P&quot;30&quot; + V&quot;oneThru29&quot;</text>
<text text-anchor="middle" x="4383.5" y="-189.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;oneThru31 &#160;&#160;&#160;= V&quot;longMonth&quot; + V&quot;oneThru30&quot;</text>
<text text-anchor="middle" x="4383.5" y="-158.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;longMonth &#160;&#160;&#160;= P&quot;31&quot;</text>
<text text-anchor="middle" x="4383.5" y="-127.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;threeDecan &#160;&#160;= V&quot;longMonth&quot; + P&quot;30&quot;</text>
<text text-anchor="middle" x="4383.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; (* 4. Date and Time Extensions *)</text>
<text text-anchor="middle" x="4383.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_25&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4314.9944,-1378.5352C4319.1986,-1326.8658 4331.6836,-1173.4255 4344.8638,-1011.4398"/>
<polygon fill="#000000" stroke="#000000" points="4348.3699,-1011.5058 4345.6925,-1001.2548 4341.393,-1010.938 4348.3699,-1011.5058"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="4992.5,-556.5027 4654.5,-556.5027 4654.5,-516.6985 4992.5,-516.6985 4992.5,-556.5027"/>
<text text-anchor="middle" x="4823.5" y="-525.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">return Grammar(_date_fn, date_metas, nil, nil)</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_26&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4703.1259,-1378.5352C4718.7529,-1269.2352 4799.4904,-704.5315 4819.1706,-566.882"/>
<polygon fill="#000000" stroke="#000000" points="4822.682,-567.0507 4820.6326,-556.6559 4815.7524,-566.0599 4822.682,-567.0507"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="4112.5,-36 4058.5,-36 4058.5,0 4112.5,0 4112.5,-36"/>
</g>
<!-- raw_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4085.5,-518.4474C4085.5,-441.2775 4085.5,-140.1323 4085.5,-46.1662"/>
<polygon fill="#000000" stroke="#000000" points="4089.0001,-46.0058 4085.5,-36.0058 4082.0001,-46.0059 4089.0001,-46.0058"/>
</g>
</g>
</svg>
