<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2940pt" height="722pt"
 viewBox="0.00 0.00 2939.50 722.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 718.2007)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-718.2007 2935.5,-718.2007 2935.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="773" cy="-696.2007" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="773" y="-692.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 85</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="773" cy="-624.2007" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="773" y="-620.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;40</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773,-678.0321C773,-670.3317 773,-661.1751 773,-652.6174"/>
<polygon fill="#000000" stroke="#000000" points="776.5001,-652.6139 773,-642.614 769.5001,-652.614 776.5001,-652.6139"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="265" cy="-552.2007" rx="113.2139" ry="18"/>
<text text-anchor="middle" x="265" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Extended Lpeg module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M718.1524,-616.427C632.406,-604.274 465.5123,-580.6198 359.95,-565.6582"/>
<polygon fill="#000000" stroke="#000000" points="360.3228,-562.1761 349.9305,-564.2381 359.3404,-569.1069 360.3228,-562.1761"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="488" cy="-552.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="488" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.5755,-612.4724C671.1233,-598.4635 579.3391,-575.2758 527.2619,-562.1195"/>
<polygon fill="#000000" stroke="#000000" points="527.9512,-558.6837 517.3985,-559.6277 526.2366,-565.4705 527.9512,-558.6837"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="664" cy="-552.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="664" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M747.9932,-607.6825C731.7222,-596.9347 710.4324,-582.8716 693.3585,-571.5935"/>
<polygon fill="#000000" stroke="#000000" points="695.1363,-568.5732 684.8632,-565.9819 691.2781,-574.414 695.1363,-568.5732"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="815" cy="-552.2007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="815" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;14</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M783.382,-606.403C788.2282,-598.0952 794.0982,-588.0323 799.4584,-578.8434"/>
<polygon fill="#000000" stroke="#000000" points="802.5763,-580.4446 804.5918,-570.0433 796.5299,-576.9175 802.5763,-580.4446"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-552.2007" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1375" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;40</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M829.3641,-617.4595C939.5616,-604.2797 1183.3218,-575.1257 1304.1961,-560.669"/>
<polygon fill="#000000" stroke="#000000" points="1304.932,-564.106 1314.4455,-559.4431 1304.1006,-557.1555 1304.932,-564.106"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2333" cy="-552.2007" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2333" y="-548.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 41&#45;85</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M833.198,-621.4223C1076.7225,-610.1828 1988.6853,-568.0922 2257.7943,-555.6718"/>
<polygon fill="#000000" stroke="#000000" points="2258.0257,-559.1649 2267.8537,-555.2075 2257.7029,-552.1723 2258.0257,-559.1649"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="320,-496.8007 150,-496.8007 150,-460.8007 320,-460.8007 320,-496.8007"/>
<text text-anchor="middle" x="235" y="-475.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">* Extended Lpeg module</text>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M257.5843,-534.0569C254.1587,-525.6758 250.0171,-515.5425 246.2209,-506.2545"/>
<polygon fill="#000000" stroke="#000000" points="249.4577,-504.9227 242.4344,-496.9902 242.978,-507.5711 249.4577,-504.9227"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="365" cy="-478.8007" rx="27" ry="18"/>
<text text-anchor="middle" x="365" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M465.7256,-538.9085C445.7358,-526.9796 416.2566,-509.388 394.3494,-496.3149"/>
<polygon fill="#000000" stroke="#000000" points="395.8547,-493.1374 385.4739,-491.0184 392.2675,-499.1484 395.8547,-493.1374"/>
</g>
<!-- literal_10 -->
<g id="node11" class="node">
<title>literal_10</title>
<ellipse fill="none" stroke="#000000" cx="441" cy="-478.8007" rx="31.481" ry="18"/>
<text text-anchor="middle" x="441" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;literal_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M477.0991,-535.1768C471.2264,-526.0054 463.8634,-514.5065 457.3213,-504.2898"/>
<polygon fill="#000000" stroke="#000000" points="460.1818,-502.2664 451.8418,-495.7323 454.2868,-506.0412 460.1818,-502.2664"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="517" cy="-478.8007" rx="27" ry="18"/>
<text text-anchor="middle" x="517" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M495.0201,-534.4326C498.4041,-525.8675 502.5366,-515.408 506.3013,-505.8795"/>
<polygon fill="#000000" stroke="#000000" points="509.6251,-506.9917 510.0446,-496.4052 503.1148,-504.4195 509.6251,-506.9917"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="642" cy="-478.8007" rx="27" ry="18"/>
<text text-anchor="middle" x="642" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.6744,-534.4326C656.1529,-526.02 653.0837,-515.7798 650.269,-506.3892"/>
<polygon fill="#000000" stroke="#000000" points="653.5766,-505.2336 647.3528,-496.6596 646.8713,-507.2435 653.5766,-505.2336"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1032.5,-498.1013 687.5,-498.1013 687.5,-459.5001 1032.5,-459.5001 1032.5,-498.1013"/>
<text text-anchor="middle" x="860" y="-483.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local lpeg = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="860" y="-467.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = setmetatable({}, {__index = lpeg})</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_5&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M826.1236,-534.0569C831.1208,-525.9059 837.1339,-516.0978 842.6984,-507.0216"/>
<polygon fill="#000000" stroke="#000000" points="845.8161,-508.6326 848.059,-498.2778 839.8483,-504.9738 845.8161,-508.6326"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1167" cy="-478.8007" rx="116.5627" ry="18"/>
<text text-anchor="middle" x="1167" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Ppt &#45;&#45; Codepoint pattern</text>
</g>
<!-- section_6&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1334.4017,-537.8742C1302.8464,-526.7388 1258.6985,-511.1597 1223.6624,-498.796"/>
<polygon fill="#000000" stroke="#000000" points="1224.6348,-495.4277 1214.04,-495.4004 1222.3054,-502.0287 1224.6348,-495.4277"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1334" cy="-478.8007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1334" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1364.8652,-534.0569C1359.9772,-525.3063 1354.0224,-514.6457 1348.652,-505.0313"/>
<polygon fill="#000000" stroke="#000000" points="1351.6682,-503.2539 1343.7359,-496.2304 1345.557,-506.6675 1351.6682,-503.2539"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1416" cy="-478.8007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1416" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_6&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1385.1348,-534.0569C1390.0228,-525.3063 1395.9776,-514.6457 1401.348,-505.0313"/>
<polygon fill="#000000" stroke="#000000" points="1404.443,-506.6675 1406.2641,-496.2304 1398.3318,-503.2539 1404.443,-506.6675"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1517" cy="-478.8007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1517" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_6&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1405.8119,-536.274C1428.9992,-524.2885 1460.7132,-507.8954 1484.3382,-495.6836"/>
<polygon fill="#000000" stroke="#000000" points="1486.0036,-498.7628 1493.2799,-491.0617 1482.7893,-492.5444 1486.0036,-498.7628"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="1756" cy="-478.8007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1756" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 24&#45;38</text>
</g>
<!-- section_6&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_6&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1428.7799,-541.84C1496.1724,-528.8567 1611.8137,-506.5783 1686.0318,-492.2801"/>
<polygon fill="#000000" stroke="#000000" points="1687.0627,-495.646 1696.22,-490.3174 1685.7385,-488.7724 1687.0627,-495.646"/>
</g>
<!-- header_35 -->
<g id="node36" class="node">
<title>header_35</title>
<ellipse fill="none" stroke="#000000" cx="2181" cy="-478.8007" rx="102.0437" ry="18"/>
<text text-anchor="middle" x="2181" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Csp &#45;&#45; Capture span</text>
</g>
<!-- section_7&#45;&gt;header_35 -->
<g id="edge35" class="edge">
<title>section_7&#45;&gt;header_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2300.3922,-536.4546C2278.5216,-525.8934 2249.4412,-511.8506 2225.4564,-500.2685"/>
<polygon fill="#000000" stroke="#000000" points="2226.7301,-496.9969 2216.2031,-495.8001 2223.6861,-503.3004 2226.7301,-496.9969"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="2333" cy="-478.8007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2333" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_7&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2333,-534.0569C2333,-525.9404 2333,-516.1808 2333,-507.1369"/>
<polygon fill="#000000" stroke="#000000" points="2336.5001,-506.9901 2333,-496.9902 2329.5001,-506.9902 2336.5001,-506.9901"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="2524" cy="-478.8007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2524" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 46&#45;67</text>
</g>
<!-- section_7&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_7&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2371.1926,-537.5235C2400.7902,-526.1494 2442.0415,-510.2968 2474.2245,-497.9291"/>
<polygon fill="#000000" stroke="#000000" points="2475.8194,-501.0658 2483.8983,-494.2115 2473.3083,-494.5317 2475.8194,-501.0658"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="2791" cy="-478.8007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2791" y="-474.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 83&#45;85</text>
</g>
<!-- section_7&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>section_7&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2390.08,-543.053C2472.7091,-529.8106 2625.7125,-505.29 2716.9381,-490.67"/>
<polygon fill="#000000" stroke="#000000" points="2717.6099,-494.1071 2726.9301,-489.0687 2716.5022,-487.1953 2717.6099,-494.1071"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="394,-301.0015 0,-301.0015 0,-229.1992 394,-229.1992 394,-301.0015"/>
<text text-anchor="middle" x="197" y="-237.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is where we add extended captures a la the old </text>
</g>
<!-- raw_9&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_9&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M352.3727,-462.7384C326.9808,-430.4393 268.9682,-356.6457 231.4602,-308.9347"/>
<polygon fill="#000000" stroke="#000000" points="234.0987,-306.6276 225.1668,-300.9292 228.5956,-310.9539 234.0987,-306.6276"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="466,-283.1004 412,-283.1004 412,-247.1004 466,-247.1004 466,-283.1004"/>
<text text-anchor="middle" x="439" y="-261.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">epeg</text>
</g>
<!-- literal_10&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>literal_10&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M440.8295,-460.5807C440.4804,-423.2821 439.6822,-337.9957 439.265,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="442.7636,-293.241 439.1701,-283.2742 435.7639,-293.3066 442.7636,-293.241"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="549.5,-284.4009 484.5,-284.4009 484.5,-245.7998 549.5,-245.7998 549.5,-284.4009"/>
<text text-anchor="middle" x="517" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="517" y="-253.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">module.</text>
</g>
<!-- raw_11&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_11&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M517,-460.5807C517,-423.6551 517,-339.6967 517,-294.7696"/>
<polygon fill="#000000" stroke="#000000" points="520.5001,-294.5009 517,-284.5009 513.5001,-294.5009 520.5001,-294.5009"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1046,-292.4008 568,-292.4008 568,-237.7999 1046,-237.7999 1046,-292.4008"/>
<text text-anchor="middle" x="807" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">The difference here is that we include lpeg as a metatable __index</text>
<text text-anchor="middle" x="807" y="-245.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">and can therefore use elpeg as L everywhere we currently use lpeg.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M654.4018,-462.7384C680.8442,-428.4915 743.3054,-347.5946 779.5885,-300.6024"/>
<polygon fill="#000000" stroke="#000000" points="782.4863,-302.5764 785.8274,-292.5221 776.9456,-298.2984 782.4863,-302.5764"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1269.5,-283.1004 1064.5,-283.1004 1064.5,-247.1004 1269.5,-247.1004 1269.5,-283.1004"/>
<text text-anchor="middle" x="1167" y="-261.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">** Ppt &#45;&#45; Codepoint pattern</text>
</g>
<!-- header_18&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>header_18&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1167,-460.5807C1167,-423.2821 1167,-337.9957 1167,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="1170.5001,-293.2742 1167,-283.2742 1163.5001,-293.2742 1170.5001,-293.2742"/>
</g>
<!-- raw_24 -->
<g id="node25" class="node">
<title>raw_24</title>
<ellipse fill="none" stroke="#000000" cx="1315" cy="-265.1004" rx="27" ry="18"/>
<text text-anchor="middle" x="1315" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_24 -->
<g id="edge24" class="edge">
<title>prose_19&#45;&gt;raw_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1332.3801,-460.5807C1329.0639,-423.2821 1321.4811,-337.9957 1317.5179,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="1320.9878,-292.9249 1316.6158,-283.2742 1314.0153,-293.5449 1320.9878,-292.9249"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1387" cy="-265.1004" rx="27" ry="18"/>
<text text-anchor="middle" x="1387" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_20&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1413.5275,-460.5807C1408.4659,-423.2821 1396.8922,-337.9957 1390.8431,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="1394.2793,-292.7127 1389.4663,-283.2742 1387.3429,-293.6541 1394.2793,-292.7127"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1459" cy="-265.1004" rx="27" ry="18"/>
<text text-anchor="middle" x="1459" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_21&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1509.1547,-461.0879C1504.5971,-450.3353 1498.9862,-436.2498 1495,-423.4007 1481.1198,-378.6587 1470.0879,-325.2852 1464.0568,-293.349"/>
<polygon fill="#000000" stroke="#000000" points="1467.4733,-292.5766 1462.2063,-283.3837 1460.5909,-293.8547 1467.4733,-292.5766"/>
</g>
<!-- literal_29 -->
<g id="node30" class="node">
<title>literal_29</title>
<ellipse fill="none" stroke="#000000" cx="1535" cy="-265.1004" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1535" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_21&#45;&gt;literal_29 -->
<g id="edge29" class="edge">
<title>prose_21&#45;&gt;literal_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1518.5347,-460.5807C1521.6763,-423.2821 1528.86,-337.9957 1532.6146,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="1536.1174,-293.5327 1533.4692,-283.2742 1529.1421,-292.9451 1536.1174,-293.5327"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="1611" cy="-265.1004" rx="27" ry="18"/>
<text text-anchor="middle" x="1611" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_21&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1537.1258,-464.5524C1549.8714,-454.4789 1565.6566,-439.873 1575,-423.4007 1598.3624,-382.2131 1606.5655,-326.9062 1609.4446,-293.752"/>
<polygon fill="#000000" stroke="#000000" points="1612.9627,-293.6467 1610.2311,-283.4101 1605.9828,-293.1159 1612.9627,-293.6467"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2078,-369.3009 1656,-369.3009 1656,-160.8999 2078,-160.8999 2078,-369.3009"/>
<text text-anchor="middle" x="1867" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function num_bytes(str)</text>
<text text-anchor="middle" x="1867" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;returns the number of bytes in the next character in str</text>
<text text-anchor="middle" x="1867" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local c = str:byte(1)</text>
<text text-anchor="middle" x="1867" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if c &gt;= 0x00 and c &lt;= 0x7F then</text>
<text text-anchor="middle" x="1867" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 1</text>
<text text-anchor="middle" x="1867" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xC2 and c &lt;= 0xDF then</text>
<text text-anchor="middle" x="1867" y="-261.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 2</text>
<text text-anchor="middle" x="1867" y="-246.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xE0 and c &lt;= 0xEF then</text>
<text text-anchor="middle" x="1867" y="-230.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 3</text>
<text text-anchor="middle" x="1867" y="-215.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xF0 and c &lt;= 0xF4 then</text>
<text text-anchor="middle" x="1867" y="-200.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 4</text>
<text text-anchor="middle" x="1867" y="-184.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1867" y="-169.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>codeblock_22&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.4638,-460.5807C1775.2878,-441.6672 1791.5211,-410.4145 1808.1563,-378.3878"/>
<polygon fill="#000000" stroke="#000000" points="1811.3505,-379.8314 1812.854,-369.3437 1805.1385,-376.6047 1811.3505,-379.8314"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="989,-63.3015 791,-63.3015 791,-7.4985 989,-7.4985 989,-63.3015"/>
<text text-anchor="middle" x="890" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Captures one Unicode point</text>
</g>
<!-- raw_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1316.7761,-246.9159C1318.9167,-213.6347 1318.1115,-143.0249 1278,-106.8001 1231.4418,-64.7532 1059.1906,-84.6317 998,-70.8001 991.7481,-69.3869 985.3438,-67.7623 978.9265,-66.0028"/>
<polygon fill="#000000" stroke="#000000" points="979.4276,-62.5066 968.8516,-63.1378 977.5128,-69.2396 979.4276,-62.5066"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1338.5,-55.3021 1007.5,-55.3021 1007.5,-15.4979 1338.5,-15.4979 1338.5,-55.3021"/>
<text text-anchor="middle" x="1173" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">I actually have no idea how to do this yet...</text>
</g>
<!-- raw_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1387.987,-247.0826C1388.7546,-215.0018 1385.7623,-147.5337 1351,-106.8001 1332.1487,-84.7106 1305.4819,-69.385 1278.5129,-58.7786"/>
<polygon fill="#000000" stroke="#000000" points="1279.566,-55.4359 1268.9734,-55.2204 1277.1197,-61.9945 1279.566,-55.4359"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1561.5,-55.3021 1356.5,-55.3021 1356.5,-15.4979 1561.5,-15.4979 1561.5,-55.3021"/>
<text text-anchor="middle" x="1459" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">Looks like byte 97 is just </text>
</g>
<!-- raw_28&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_28&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1459,-247.0762C1459,-207.7462 1459,-113.8811 1459,-65.4487"/>
<polygon fill="#000000" stroke="#000000" points="1462.5001,-65.2826 1459,-55.2827 1455.5001,-65.2827 1462.5001,-65.2826"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1634,-53.4 1580,-53.4 1580,-17.4 1634,-17.4 1634,-53.4"/>
<text text-anchor="middle" x="1607" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">\97</text>
</g>
<!-- literal_29&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>literal_29&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1538.5518,-246.7561C1544.5633,-216.9464 1557.7877,-156.3359 1575,-106.8001 1580.1517,-91.9739 1587.172,-75.9857 1593.3246,-62.9049"/>
<polygon fill="#000000" stroke="#000000" points="1596.649,-64.0666 1597.815,-53.5361 1590.3366,-61.041 1596.649,-64.0666"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1864,-53.4 1652,-53.4 1652,-17.4 1864,-17.4 1864,-53.4"/>
<text text-anchor="middle" x="1758" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> in Lua. That&#39;s easy enough.</text>
</g>
<!-- raw_30&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_30&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1610.8328,-246.7105C1611.4269,-215.2223 1616.5849,-150.188 1647,-106.8001 1661.5583,-86.0323 1684.2784,-69.8754 1705.3808,-58.2246"/>
<polygon fill="#000000" stroke="#000000" points="1707.095,-61.2774 1714.2971,-53.507 1703.8212,-55.0901 1707.095,-61.2774"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2266,-283.1004 2096,-283.1004 2096,-247.1004 2266,-247.1004 2266,-283.1004"/>
<text text-anchor="middle" x="2181" y="-261.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">** Csp &#45;&#45; Capture span</text>
</g>
<!-- header_35&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>header_35&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2181,-460.5807C2181,-423.2821 2181,-337.9957 2181,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="2184.5001,-293.2742 2181,-283.2742 2177.5001,-293.2742 2184.5001,-293.2742"/>
</g>
<!-- raw_40 -->
<g id="node41" class="node">
<title>raw_40</title>
<ellipse fill="none" stroke="#000000" cx="2311" cy="-265.1004" rx="27" ry="18"/>
<text text-anchor="middle" x="2311" y="-260.9004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_36&#45;&gt;raw_40 -->
<g id="edge40" class="edge">
<title>prose_36&#45;&gt;raw_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2331.1243,-460.5807C2327.2845,-423.2821 2318.5044,-337.9957 2313.9155,-293.4203"/>
<polygon fill="#000000" stroke="#000000" points="2317.3767,-292.8632 2312.871,-283.2742 2310.4135,-293.5801 2317.3767,-292.8632"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2820,-423.2012 2356,-423.2012 2356,-106.9995 2820,-106.9995 2820,-423.2012"/>
<text text-anchor="middle" x="2588" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function spanner(first, last, str, root)</text>
<text text-anchor="middle" x="2588" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local vals = {}</text>
<text text-anchor="middle" x="2588" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.span = true</text>
<text text-anchor="middle" x="2588" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.val = string.sub(str, first, last &#45; 1)</text>
<text text-anchor="middle" x="2588" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.first = first</text>
<text text-anchor="middle" x="2588" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.last = last &#45; 1</text>
<text text-anchor="middle" x="2588" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if vals.last &gt;= vals.first then</text>
<text text-anchor="middle" x="2588" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return vals</text>
<text text-anchor="middle" x="2588" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2588" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; If a capture contains nothing, we don&#39;t want a node for it</text>
<text text-anchor="middle" x="2588" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return nil</text>
<text text-anchor="middle" x="2588" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2588" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">function epeg.Csp (patt)</text>
<text text-anchor="middle" x="2588" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return lpeg.Cp() </text>
<text text-anchor="middle" x="2588" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cmt(patt, function() return true end) </text>
<text text-anchor="middle" x="2588" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cp() </text>
<text text-anchor="middle" x="2588" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(1) </text>
<text text-anchor="middle" x="2588" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(2) / spanner</text>
<text text-anchor="middle" x="2588" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>codeblock_37&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2529.4566,-460.5807C2531.7011,-453.0863 2534.5258,-443.6545 2537.7152,-433.0048"/>
<polygon fill="#000000" stroke="#000000" points="2541.0903,-433.9343 2540.6065,-423.3505 2534.3846,-431.926 2541.0903,-433.9343"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2931.5,-283.1004 2838.5,-283.1004 2838.5,-247.1004 2931.5,-247.1004 2931.5,-283.1004"/>
<text text-anchor="middle" x="2885" y="-261.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">return epeg</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_38&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2804.923,-461.0801C2812.7307,-450.5566 2822.2307,-436.7066 2829,-423.4007 2851.1852,-379.7926 2868.3509,-325.323 2877.543,-292.9776"/>
<polygon fill="#000000" stroke="#000000" points="2880.9283,-293.8677 2880.2435,-283.295 2874.1856,-291.9871 2880.9283,-293.8677"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2567.5,-70.7004 2054.5,-70.7004 2054.5,-.0997 2567.5,-.0997 2567.5,-70.7004"/>
<text text-anchor="middle" x="2311" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">This is the old&#45;school capture that plays into making named Nodes using</text>
<text text-anchor="middle" x="2311" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.</text>
</g>
<!-- raw_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>raw_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2311,-247.0762C2311,-211.654 2311,-131.9955 2311,-81.1328"/>
<polygon fill="#000000" stroke="#000000" points="2314.5001,-81.0544 2311,-71.0544 2307.5001,-81.0544 2314.5001,-81.0544"/>
</g>
</g>
</svg>