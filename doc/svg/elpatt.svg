<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="7189pt" height="845pt"
 viewBox="0.00 0.00 7189.30 845.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 841.0008)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-841.0008 7185.2972,-841.0008 7185.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736" cy="-819.0008" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736" y="-814.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 106</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736" cy="-747.0008" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736" y="-742.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;54</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736,-800.8321C736,-793.1317 736,-783.9751 736,-775.4174"/>
<polygon fill="#000000" stroke="#000000" points="739.5001,-775.414 736,-765.414 732.5001,-775.4141 739.5001,-775.414"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="279" cy="-675.0008" rx="113.2139" ry="18"/>
<text text-anchor="middle" x="279" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Extended Lpeg module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M682.2324,-738.5297C605.4003,-726.4249 463.1908,-704.0199 369.8435,-689.3131"/>
<polygon fill="#000000" stroke="#000000" points="370.2625,-685.836 359.8396,-687.737 369.1731,-692.7507 370.2625,-685.836"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="497" cy="-675.0008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="497" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M693.2716,-734.1286C648.3985,-720.6104 578.4796,-699.5469 535.3317,-686.5484"/>
<polygon fill="#000000" stroke="#000000" points="536.0818,-683.1191 525.4972,-683.5857 534.0626,-689.8215 536.0818,-683.1191"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="606" cy="-675.0008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="606" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M707.1488,-731.0216C686.6885,-719.6898 659.2214,-704.4773 638.0734,-692.7645"/>
<polygon fill="#000000" stroke="#000000" points="639.5867,-689.6017 629.1431,-687.8185 636.1952,-695.7253 639.5867,-689.6017"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="783" cy="-675.0008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="783" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;17</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M747.618,-729.203C753.0976,-720.8087 759.7469,-710.6225 765.7955,-701.3566"/>
<polygon fill="#000000" stroke="#000000" points="768.8173,-703.1303 771.3528,-692.8433 762.9557,-699.3039 768.8173,-703.1303"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1399" cy="-675.0008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1399" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 19&#45;27</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M793.1008,-740.7998C913.8675,-727.6849 1194.933,-697.1619 1327.444,-682.7716"/>
<polygon fill="#000000" stroke="#000000" points="1327.929,-686.2396 1337.4927,-681.6803 1327.1732,-679.2805 1327.929,-686.2396"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="4840" cy="-675.0008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4840" y="-670.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 55&#45;89</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M796.7971,-745.9342C1261.5278,-737.781 4247.3418,-685.3983 4763.91,-676.3357"/>
<polygon fill="#000000" stroke="#000000" points="4764.287,-679.8297 4774.2241,-676.1547 4764.1642,-672.8308 4764.287,-679.8297"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="319,-596.2007 149,-596.2007 149,-560.2007 319,-560.2007 319,-596.2007"/>
<text text-anchor="middle" x="234" y="-574.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">* Extended Lpeg module</text>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M270.5358,-656.7934C263.8105,-642.3264 254.2995,-621.8672 246.6675,-605.4498"/>
<polygon fill="#000000" stroke="#000000" points="249.8156,-603.919 242.4262,-596.3264 243.468,-606.8699 249.8156,-603.919"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="364" cy="-578.2007" rx="27" ry="18"/>
<text text-anchor="middle" x="364" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M471.524,-663.9691C450.987,-654.3645 422.0051,-639.1523 400,-621.0008 393.5748,-615.7008 387.4135,-609.1471 382.0606,-602.7749"/>
<polygon fill="#000000" stroke="#000000" points="384.7397,-600.5212 375.7536,-594.9086 379.2784,-604.9 384.7397,-600.5212"/>
</g>
<!-- literal_10 -->
<g id="node11" class="node">
<title>literal_10</title>
<ellipse fill="none" stroke="#000000" cx="440" cy="-578.2007" rx="31.481" ry="18"/>
<text text-anchor="middle" x="440" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;literal_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M486.8095,-657.6949C478.0556,-642.8284 465.3049,-621.1747 455.3211,-604.2198"/>
<polygon fill="#000000" stroke="#000000" points="458.1923,-602.1979 450.1022,-595.3568 452.1604,-605.7498 458.1923,-602.1979"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="516" cy="-578.2007" rx="27" ry="18"/>
<text text-anchor="middle" x="516" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M500.5738,-656.7934C503.3603,-642.5968 507.2794,-622.63 510.47,-606.3746"/>
<polygon fill="#000000" stroke="#000000" points="513.9506,-606.8133 512.4423,-596.3264 507.0817,-605.465 513.9506,-606.8133"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="588" cy="-578.2007" rx="27" ry="18"/>
<text text-anchor="middle" x="588" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M602.6143,-656.7934C599.9745,-642.5968 596.2616,-622.63 593.2389,-606.3746"/>
<polygon fill="#000000" stroke="#000000" points="596.6397,-605.518 591.3705,-596.3264 589.7577,-606.7978 596.6397,-605.518"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1062.5,-620.8018 633.5,-620.8018 633.5,-535.5997 1062.5,-535.5997 1062.5,-620.8018"/>
<text text-anchor="middle" x="848" y="-605.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="848" y="-590.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local elpatt = {}</text>
<text text-anchor="middle" x="848" y="-575.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">elpatt.P, elpatt.B, elpatt.V, elpatt.R = L.P, L.B, L.V, L.R</text>
<text text-anchor="middle" x="848" y="-543.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, Cc = L.P, L.Cc</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_5&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M795.226,-656.7934C800.5699,-648.8351 807.1314,-639.0635 813.7889,-629.1489"/>
<polygon fill="#000000" stroke="#000000" points="816.7102,-631.0769 819.3792,-620.8237 810.8988,-627.1746 816.7102,-631.0769"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1194" cy="-578.2007" rx="113.1967" ry="18"/>
<text text-anchor="middle" x="1194" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Ppt : Codepoint pattern</text>
</g>
<!-- section_6&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1365.607,-659.2327C1331.3009,-643.0336 1277.6624,-617.7057 1239.4913,-599.6815"/>
<polygon fill="#000000" stroke="#000000" points="1240.6783,-596.3714 1230.1412,-595.2664 1237.6893,-602.7013 1240.6783,-596.3714"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1358" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1358" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1391.2882,-656.7934C1385.1795,-642.3709 1376.5484,-621.993 1369.6057,-605.6014"/>
<polygon fill="#000000" stroke="#000000" points="1372.6617,-603.8424 1365.5387,-595.9994 1366.216,-606.5725 1372.6617,-603.8424"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1440" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1440" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_6&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1406.7118,-656.7934C1412.8205,-642.3709 1421.4516,-621.993 1428.3943,-605.6014"/>
<polygon fill="#000000" stroke="#000000" points="1431.784,-606.5725 1432.4613,-595.9994 1425.3383,-603.8424 1431.784,-606.5725"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1533" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1533" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_6&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1425.7053,-658.4303C1441.9785,-648.085 1463.0295,-634.2555 1481,-621.0008 1489.7511,-614.5462 1499.0066,-607.1327 1507.2451,-600.309"/>
<polygon fill="#000000" stroke="#000000" points="1509.6698,-602.8437 1515.0882,-593.7392 1505.1748,-597.4775 1509.6698,-602.8437"/>
</g>
<!-- section_22 -->
<g id="node23" class="node">
<title>section_22</title>
<ellipse fill="none" stroke="#000000" cx="2021" cy="-578.2007" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2021" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;54</text>
</g>
<!-- section_6&#45;&gt;section_22 -->
<g id="edge22" class="edge">
<title>section_6&#45;&gt;section_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1456.124,-666.1107C1571.2156,-648.1994 1830.4816,-607.8505 1953.6175,-588.6873"/>
<polygon fill="#000000" stroke="#000000" points="1954.3306,-592.1185 1963.6734,-587.1223 1953.2541,-585.2018 1954.3306,-592.1185"/>
</g>
<!-- header_48 -->
<g id="node49" class="node">
<title>header_48</title>
<ellipse fill="none" stroke="#000000" cx="3206" cy="-578.2007" rx="94.802" ry="18"/>
<text text-anchor="middle" x="3206" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : D : Drop a capture</text>
</g>
<!-- section_7&#45;&gt;header_48 -->
<g id="edge48" class="edge">
<title>section_7&#45;&gt;header_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4773.9952,-674.3907C4526.3145,-671.8178 3652.3896,-660.1109 3377,-621.0008 3339.5189,-615.6778 3298.3327,-605.5054 3265.7738,-596.4132"/>
<polygon fill="#000000" stroke="#000000" points="3266.5354,-592.9912 3255.96,-593.6327 3264.6271,-599.7261 3266.5354,-592.9912"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="3418" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3418" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>section_7&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4776.1371,-670.6534C4532.1777,-654.0463 3662.6356,-594.8538 3460.2913,-581.0796"/>
<polygon fill="#000000" stroke="#000000" points="3460.2927,-577.5717 3450.0781,-580.3844 3459.8173,-584.5555 3460.2927,-577.5717"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="4372" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4372" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_7&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4787.2242,-664.0847C4692.7935,-644.5529 4496.9088,-604.0366 4412.3308,-586.5426"/>
<polygon fill="#000000" stroke="#000000" points="4412.8458,-583.0751 4402.3441,-584.477 4411.4278,-589.9301 4412.8458,-583.0751"/>
</g>
<!-- prose_51 -->
<g id="node52" class="node">
<title>prose_51</title>
<ellipse fill="none" stroke="#000000" cx="4727" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4727" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_51 -->
<g id="edge51" class="edge">
<title>section_7&#45;&gt;prose_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4819.7979,-657.6949C4800.9675,-641.5641 4772.8089,-617.4424 4752.4509,-600.0029"/>
<polygon fill="#000000" stroke="#000000" points="4754.6676,-597.2932 4744.7961,-593.4455 4750.1136,-602.6094 4754.6676,-597.2932"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="4941" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4941" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_7&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4858.525,-657.2462C4875.0686,-641.3904 4899.3897,-618.0807 4917.3369,-600.8798"/>
<polygon fill="#000000" stroke="#000000" points="4919.7993,-603.3678 4924.5971,-593.9215 4914.9557,-598.3141 4919.7993,-603.3678"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="5049" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5049" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_7&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4882.9123,-661.2592C4911.6001,-651.4533 4949.8356,-637.1749 4982,-621.0008 4995.1676,-614.3794 5009.0074,-605.8352 5020.6676,-598.1243"/>
<polygon fill="#000000" stroke="#000000" points="5022.7739,-600.9256 5029.1122,-592.4358 5018.863,-595.1199 5022.7739,-600.9256"/>
</g>
<!-- prose_54 -->
<g id="node55" class="node">
<title>prose_54</title>
<ellipse fill="none" stroke="#000000" cx="5183" cy="-578.2007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5183" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_54 -->
<g id="edge54" class="edge">
<title>section_7&#45;&gt;prose_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4897.5472,-666.2523C4948.8433,-657.5911 5025.5545,-642.5022 5090,-621.0008 5110.6271,-614.1188 5132.7792,-604.0394 5150.2876,-595.3906"/>
<polygon fill="#000000" stroke="#000000" points="5152.134,-598.3799 5159.4976,-590.7622 5148.9908,-592.1252 5152.134,-598.3799"/>
</g>
<!-- codeblock_55 -->
<g id="node56" class="node">
<title>codeblock_55</title>
<ellipse fill="none" stroke="#000000" cx="5380" cy="-578.2007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="5380" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;88</text>
</g>
<!-- section_7&#45;&gt;codeblock_55 -->
<g id="edge55" class="edge">
<title>section_7&#45;&gt;codeblock_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4901.9369,-668.762C4978.1894,-660.515 5111.4242,-644.2597 5224,-621.0008 5257.3585,-614.1087 5294.1252,-604.1399 5323.5825,-595.5569"/>
<polygon fill="#000000" stroke="#000000" points="5324.6706,-598.8852 5333.2767,-592.7057 5322.6954,-592.1696 5324.6706,-598.8852"/>
</g>
<!-- section_56 -->
<g id="node57" class="node">
<title>section_56</title>
<ellipse fill="none" stroke="#000000" cx="6756" cy="-578.2007" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6756" y="-574.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 90&#45;106</text>
</g>
<!-- section_7&#45;&gt;section_56 -->
<g id="edge56" class="edge">
<title>section_7&#45;&gt;section_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4904.8466,-671.7246C5193.4216,-657.1452 6360.5552,-598.1794 6676.6939,-582.2074"/>
<polygon fill="#000000" stroke="#000000" points="6676.8787,-585.7026 6686.6894,-581.7024 6676.5255,-578.7116 6676.8787,-585.7026"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="394,-468.8017 0,-468.8017 0,-396.9994 394,-396.9994 394,-468.8017"/>
<text text-anchor="middle" x="197" y="-405.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is where we add extended captures a la the old </text>
</g>
<!-- raw_9&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_9&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M351.7409,-562.0591C345.0985,-553.7334 336.523,-543.6274 328,-535.4007 305.7896,-513.9623 279.2866,-492.5559 255.9485,-474.8926"/>
<polygon fill="#000000" stroke="#000000" points="257.9371,-472.0091 247.8377,-468.8071 253.736,-477.6083 257.9371,-472.0091"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="466,-450.9006 412,-450.9006 412,-414.9006 466,-414.9006 466,-450.9006"/>
<text text-anchor="middle" x="439" y="-429.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">epeg</text>
</g>
<!-- literal_10&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>literal_10&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M439.8754,-560.0921C439.7047,-535.2942 439.3965,-490.5169 439.1951,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="442.695,-461.213 439.1262,-451.2374 435.6952,-461.2613 442.695,-461.213"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="549.5,-452.2012 484.5,-452.2012 484.5,-413.6 549.5,-413.6 549.5,-452.2012"/>
<text text-anchor="middle" x="517" y="-437.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="517" y="-421.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">module.</text>
</g>
<!-- raw_11&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_11&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M516.1246,-560.0921C516.2925,-535.7007 516.5934,-491.9796 516.7949,-462.7033"/>
<polygon fill="#000000" stroke="#000000" points="520.2952,-462.6573 516.8642,-452.6334 513.2954,-462.6091 520.2952,-462.6573"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1046,-460.201 568,-460.201 568,-405.6002 1046,-405.6002 1046,-460.201"/>
<text text-anchor="middle" x="807" y="-429.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">The difference here is that we include lpeg as a metatable __index</text>
<text text-anchor="middle" x="807" y="-413.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">and can therefore use elpeg as L everywhere we currently use lpeg.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M599.7617,-561.5026C606.2679,-553.0245 614.8718,-542.9502 624,-535.4007 657.8734,-507.3852 700.491,-482.9999 736.0748,-465.0504"/>
<polygon fill="#000000" stroke="#000000" points="738.0399,-467.982 745.4345,-460.3945 734.9222,-461.7146 738.0399,-467.982"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1278,-450.9006 1080,-450.9006 1080,-414.9006 1278,-414.9006 1278,-450.9006"/>
<text text-anchor="middle" x="1179" y="-429.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">** Ppt : Codepoint pattern</text>
</g>
<!-- header_18&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>header_18&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1192.1306,-560.0921C1189.5706,-535.2942 1184.948,-490.5169 1181.9268,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="1185.4015,-460.8251 1180.893,-451.2374 1178.4385,-461.5439 1185.4015,-460.8251"/>
</g>
<!-- raw_24 -->
<g id="node25" class="node">
<title>raw_24</title>
<ellipse fill="none" stroke="#000000" cx="1323" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="1323" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_24 -->
<g id="edge24" class="edge">
<title>prose_19&#45;&gt;raw_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1353.638,-560.0921C1347.632,-535.1586 1336.7606,-490.0269 1329.714,-460.7733"/>
<polygon fill="#000000" stroke="#000000" points="1333.0516,-459.6832 1327.307,-450.7809 1326.2463,-461.3225 1333.0516,-459.6832"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1395" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="1395" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_20&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.4821,-560.3841C1426.7563,-535.4383 1412.644,-489.8712 1403.5512,-460.5115"/>
<polygon fill="#000000" stroke="#000000" points="1406.8648,-459.3799 1400.563,-450.863 1400.1782,-461.4508 1406.8648,-459.3799"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1467" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="1467" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_21&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1525.0389,-560.6741C1513.6417,-535.5832 1492.5783,-489.2117 1479.2048,-459.7698"/>
<polygon fill="#000000" stroke="#000000" points="1482.3118,-458.1466 1474.9894,-450.4893 1475.9384,-461.0416 1482.3118,-458.1466"/>
</g>
<!-- literal_29 -->
<g id="node30" class="node">
<title>literal_29</title>
<ellipse fill="none" stroke="#000000" cx="1543" cy="-432.9006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1543" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_21&#45;&gt;literal_29 -->
<g id="edge29" class="edge">
<title>prose_21&#45;&gt;literal_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1534.2463,-560.0921C1535.953,-535.2942 1539.0347,-490.5169 1541.0488,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="1544.543,-461.4541 1541.738,-451.2374 1537.5596,-460.9734 1544.543,-461.4541"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="1656" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="1656" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_21&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1546.8706,-561.8154C1568.5784,-536.1719 1610.6856,-486.4305 1635.774,-456.7936"/>
<polygon fill="#000000" stroke="#000000" points="1638.5781,-458.8982 1642.3678,-449.0043 1633.2353,-454.3754 1638.5781,-458.8982"/>
</g>
<!-- header_34 -->
<g id="node35" class="node">
<title>header_34</title>
<ellipse fill="none" stroke="#000000" cx="1889" cy="-432.9006" rx="81.237" ry="18"/>
<text text-anchor="middle" x="1889" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : num_bytes(str)</text>
</g>
<!-- section_22&#45;&gt;header_34 -->
<g id="edge34" class="edge">
<title>section_22&#45;&gt;header_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2005.0777,-560.6741C1981.9138,-535.1763 1938.7853,-487.7021 1912.1208,-458.351"/>
<polygon fill="#000000" stroke="#000000" points="1914.7077,-455.9934 1905.3928,-450.9451 1909.5265,-460.7003 1914.7077,-455.9934"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="2021" cy="-432.9006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2021" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_22&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_22&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2021,-560.0921C2021,-535.2942 2021,-490.5169 2021,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="2024.5001,-461.2373 2021,-451.2374 2017.5001,-461.2374 2024.5001,-461.2373"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="2128" cy="-432.9006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2128" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_22&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_22&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2034.1203,-560.3841C2053.0146,-534.7266 2087.9733,-487.2547 2109.4876,-458.0394"/>
<polygon fill="#000000" stroke="#000000" points="2112.326,-460.0875 2115.4374,-449.9598 2106.6894,-455.9367 2112.326,-460.0875"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="2370" cy="-432.9006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2370" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;52</text>
</g>
<!-- section_22&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_22&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2057.3615,-563.0622C2120.8903,-536.6131 2252.0352,-482.0132 2322.5958,-452.6365"/>
<polygon fill="#000000" stroke="#000000" points="2324.2502,-455.739 2332.1368,-448.6643 2321.5597,-449.2767 2324.2502,-455.739"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="925,-238.8018 727,-238.8018 727,-182.9988 925,-182.9988 925,-238.8018"/>
<text text-anchor="middle" x="826" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">Captures one Unicode point</text>
</g>
<!-- raw_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1318.4199,-414.9841C1313.4316,-399.4037 1303.8207,-377.6173 1287,-366.4005 1155.7941,-278.9069 1074.6905,-401.6487 934,-330.4005 897.1481,-311.738 866.8656,-274.8243 847.8413,-246.9361"/>
<polygon fill="#000000" stroke="#000000" points="850.7528,-244.9936 842.3038,-238.6011 844.9223,-248.8673 850.7528,-244.9936"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1274.5,-230.8023 943.5,-230.8023 943.5,-190.9982 1274.5,-190.9982 1274.5,-230.8023"/>
<text text-anchor="middle" x="1109" y="-199.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">I actually have no idea how to do this yet...</text>
</g>
<!-- raw_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1388.9471,-415.1052C1383.197,-400.4485 1373.2942,-379.9456 1359,-366.4005 1331.8701,-340.6924 1315.3965,-349.0394 1283,-330.4005 1232.4871,-301.3386 1177.5884,-262.2706 1143.2441,-236.842"/>
<polygon fill="#000000" stroke="#000000" points="1145.0825,-233.8474 1134.9705,-230.6854 1140.9036,-239.4632 1145.0825,-233.8474"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1497.5,-230.8023 1292.5,-230.8023 1292.5,-190.9982 1497.5,-190.9982 1497.5,-230.8023"/>
<text text-anchor="middle" x="1395" y="-199.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">Looks like byte 97 is just </text>
</g>
<!-- raw_28&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_28&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1461.2296,-415.1086C1448.8564,-376.9576 1419.669,-286.9632 1404.5107,-240.225"/>
<polygon fill="#000000" stroke="#000000" points="1407.8271,-239.1054 1401.4128,-230.673 1401.1686,-241.265 1407.8271,-239.1054"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1570,-228.9003 1516,-228.9003 1516,-192.9003 1570,-192.9003 1570,-228.9003"/>
<text text-anchor="middle" x="1543" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">\97</text>
</g>
<!-- literal_29&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>literal_29&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1543,-414.7334C1543,-376.098 1543,-285.5357 1543,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="1546.5001,-239.0071 1543,-229.0072 1539.5001,-239.0072 1546.5001,-239.0071"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1800,-230.8023 1588,-230.8023 1588,-190.9982 1800,-190.9982 1800,-230.8023"/>
<text text-anchor="middle" x="1694" y="-215.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> in Lua. That&#39;s easy enough.</text>
</g>
<!-- raw_30&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_30&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1659.1097,-414.7334C1665.6382,-376.593 1680.8289,-287.8474 1688.841,-241.0396"/>
<polygon fill="#000000" stroke="#000000" points="1692.3378,-241.3557 1690.5752,-230.9085 1685.4381,-240.1746 1692.3378,-241.3557"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="1960,-228.9003 1818,-228.9003 1818,-192.9003 1960,-192.9003 1960,-228.9003"/>
<text text-anchor="middle" x="1889" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">*** num_bytes(str)</text>
</g>
<!-- header_34&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>header_34&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1889,-414.7334C1889,-376.098 1889,-285.5357 1889,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="1892.5001,-239.0071 1889,-229.0072 1885.5001,-239.0072 1892.5001,-239.0071"/>
</g>
<!-- raw_39 -->
<g id="node40" class="node">
<title>raw_39</title>
<ellipse fill="none" stroke="#000000" cx="2005" cy="-210.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="2005" y="-206.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_35&#45;&gt;raw_39 -->
<g id="edge39" class="edge">
<title>prose_35&#45;&gt;raw_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2019.6907,-414.7334C2016.9061,-376.098 2010.3791,-285.5357 2007.0424,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="2010.5149,-238.7297 2006.305,-229.0072 2003.533,-239.2329 2010.5149,-238.7297"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2077" cy="-210.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="2077" y="-206.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_36&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_36&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2123.8265,-414.7334C2114.91,-375.9205 2093.9544,-284.7021 2083.3642,-238.6032"/>
<polygon fill="#000000" stroke="#000000" points="2086.7389,-237.6605 2081.0887,-228.6981 2079.9166,-239.2278 2086.7389,-237.6605"/>
</g>
<!-- literal_42 -->
<g id="node43" class="node">
<title>literal_42</title>
<ellipse fill="none" stroke="#000000" cx="2153" cy="-210.9003" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2153" y="-206.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_36&#45;&gt;literal_42 -->
<g id="edge42" class="edge">
<title>prose_36&#45;&gt;literal_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2130.0459,-414.7334C2134.4059,-376.0165 2144.6382,-285.1533 2149.8417,-238.9464"/>
<polygon fill="#000000" stroke="#000000" points="2153.3198,-239.336 2150.9609,-229.0072 2146.3638,-238.5526 2153.3198,-239.336"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="2229" cy="-210.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="2229" y="-206.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_36&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_36&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2140.543,-416.3046C2154.886,-396.6771 2178.2788,-362.5947 2193,-330.4005 2206.7973,-300.2269 2216.969,-263.3953 2222.916,-238.6659"/>
<polygon fill="#000000" stroke="#000000" points="2226.3394,-239.3971 2225.2043,-228.8633 2219.5226,-237.8058 2226.3394,-239.3971"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2696,-330.4007 2274,-330.4007 2274,-91.3998 2696,-91.3998 2696,-330.4007"/>
<text text-anchor="middle" x="2485" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function num_bytes(str)</text>
<text text-anchor="middle" x="2485" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;returns the number of bytes in the next character in str</text>
<text text-anchor="middle" x="2485" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local c = str:byte(1)</text>
<text text-anchor="middle" x="2485" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(c) == &#39;number&#39; then</text>
<text text-anchor="middle" x="2485" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if c &gt;= 0x00 and c &lt;= 0x7F then</text>
<text text-anchor="middle" x="2485" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 1</text>
<text text-anchor="middle" x="2485" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif c &gt;= 0xC2 and c &lt;= 0xDF then</text>
<text text-anchor="middle" x="2485" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 2</text>
<text text-anchor="middle" x="2485" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif c &gt;= 0xE0 and c &lt;= 0xEF then</text>
<text text-anchor="middle" x="2485" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 3</text>
<text text-anchor="middle" x="2485" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif c &gt;= 0xF0 and c &lt;= 0xF4 then</text>
<text text-anchor="middle" x="2485" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 4</text>
<text text-anchor="middle" x="2485" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2485" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2485" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_37&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2379.4109,-414.7334C2388.4289,-397.3248 2402.9081,-369.3736 2418.2901,-339.6795"/>
<polygon fill="#000000" stroke="#000000" points="2421.5958,-340.9072 2423.0878,-330.4179 2415.3803,-337.6874 2421.5958,-340.9072"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="1721.5,-55.6015 1264.5,-55.6015 1264.5,.2015 1721.5,.2015 1721.5,-55.6015"/>
<text text-anchor="middle" x="1493" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">Captures the number of bytes in the next codepoint of a string.</text>
</g>
<!-- raw_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>raw_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2005.2278,-192.6885C2004.4885,-166.0395 1998.8535,-116.833 1969,-91.4 1963.9701,-87.1149 1847.1362,-71.446 1730.4918,-56.7222"/>
<polygon fill="#000000" stroke="#000000" points="1730.6552,-53.2152 1720.296,-55.4375 1729.78,-60.1602 1730.6552,-53.2152"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="2210.5,-55.0004 1739.5,-55.0004 1739.5,-.3996 2210.5,-.3996 2210.5,-55.0004"/>
<text text-anchor="middle" x="1975" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">The string must be well&#45;formed utf&#45;8, more precisely, a malformed</text>
<text text-anchor="middle" x="1975" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">string will return </text>
</g>
<!-- raw_41&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_41&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2074.4697,-192.7213C2070.4302,-168.2284 2060.8633,-123.9534 2041,-91.4 2034.5846,-80.886 2026.0213,-70.9106 2017.1935,-62.108"/>
<polygon fill="#000000" stroke="#000000" points="2019.4057,-59.3809 2009.7573,-55.0037 2014.5701,-64.4423 2019.4057,-59.3809"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2283,-45.7 2229,-45.7 2229,-9.7 2283,-9.7 2283,-45.7"/>
<text text-anchor="middle" x="2256" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">nil</text>
</g>
<!-- literal_42&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>literal_42&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2156.3672,-192.7928C2161.4854,-168.3811 2172.8266,-124.1977 2193,-91.4 2201.8239,-77.0543 2214.4543,-63.448 2226.0926,-52.522"/>
<polygon fill="#000000" stroke="#000000" points="2228.4999,-55.0637 2233.5473,-45.7484 2223.7925,-49.883 2228.4999,-55.0637"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2611,-47.0006 2301,-47.0006 2301,-8.3994 2611,-8.3994 2611,-47.0006"/>
<text text-anchor="middle" x="2456" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;A zero byte is correctly allowed by the</text>
<text text-anchor="middle" x="2456" y="-16.5" font-family="Inconsolata" font-size="14.00" fill="#000000">standard and will match here. </text>
</g>
<!-- raw_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>raw_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2229.4779,-192.5221C2231.1449,-166.5623 2237.9796,-119.2239 2265,-91.4 2279.6569,-76.3073 2322.7596,-61.3242 2364.3166,-49.6845"/>
<polygon fill="#000000" stroke="#000000" points="2365.2708,-53.0522 2373.9855,-47.0269 2363.4155,-46.3025 2365.2708,-53.0522"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3258.5,-450.9006 3095.5,-450.9006 3095.5,-414.9006 3258.5,-414.9006 3258.5,-450.9006"/>
<text text-anchor="middle" x="3177" y="-429.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">** D : Drop a capture</text>
</g>
<!-- header_48&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>header_48&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3202.3858,-560.0921C3197.4364,-535.2942 3188.4995,-490.5169 3182.6585,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="3186.0494,-460.3589 3180.6598,-451.2374 3179.1848,-461.729 3186.0494,-460.3589"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="3304" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="3304" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_49&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_49&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3400.1053,-562.8513C3383.2629,-547.8115 3358.0053,-523.6728 3340,-499.4007 3330.8377,-487.0494 3322.5227,-472.0777 3316.198,-459.4699"/>
<polygon fill="#000000" stroke="#000000" points="3319.2928,-457.8307 3311.7683,-450.3719 3312.9991,-460.895 3319.2928,-457.8307"/>
</g>
<!-- literal_59 -->
<g id="node60" class="node">
<title>literal_59</title>
<ellipse fill="none" stroke="#000000" cx="3380" cy="-432.9006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="3380" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_49&#45;&gt;literal_59 -->
<g id="edge59" class="edge">
<title>prose_49&#45;&gt;literal_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3413.3405,-560.3841C3406.8449,-535.5472 3395.0034,-490.2688 3387.3219,-460.8971"/>
<polygon fill="#000000" stroke="#000000" points="3390.614,-459.652 3384.6977,-450.863 3383.8418,-461.4232 3390.614,-459.652"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="3456" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="3456" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_49&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_49&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3422.6595,-560.3841C3429.1551,-535.5472 3440.9966,-490.2688 3448.6781,-460.8971"/>
<polygon fill="#000000" stroke="#000000" points="3452.1582,-461.4232 3451.3023,-450.863 3445.386,-459.652 3452.1582,-461.4232"/>
</g>
<!-- raw_64 -->
<g id="node65" class="node">
<title>raw_64</title>
<ellipse fill="none" stroke="#000000" cx="4138" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4138" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_50&#45;&gt;raw_64 -->
<g id="edge64" class="edge">
<title>prose_50&#45;&gt;raw_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4350.4053,-564.7917C4307.9949,-538.4574 4213.8359,-479.9902 4166.4315,-450.5549"/>
<polygon fill="#000000" stroke="#000000" points="4168.2168,-447.5436 4157.875,-445.2418 4164.5241,-453.4904 4168.2168,-447.5436"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="4498" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4498" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_51&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_51&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4705.4562,-564.5312C4663.9123,-538.1717 4572.7414,-480.3238 4526.3393,-450.8818"/>
<polygon fill="#000000" stroke="#000000" points="4528.0027,-447.7922 4517.6838,-445.3899 4524.2524,-453.7028 4528.0027,-447.7922"/>
</g>
<!-- literal_67 -->
<g id="node68" class="node">
<title>literal_67</title>
<ellipse fill="none" stroke="#000000" cx="4688" cy="-432.9006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4688" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_51&#45;&gt;literal_67 -->
<g id="edge67" class="edge">
<title>prose_51&#45;&gt;literal_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4722.2178,-560.3841C4715.5514,-535.5472 4703.3982,-490.2688 4695.5145,-460.8971"/>
<polygon fill="#000000" stroke="#000000" points="4698.794,-459.6138 4692.8213,-450.863 4692.0333,-461.4285 4698.794,-459.6138"/>
</g>
<!-- raw_68 -->
<g id="node69" class="node">
<title>raw_68</title>
<ellipse fill="none" stroke="#000000" cx="4766" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4766" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_51&#45;&gt;raw_68 -->
<g id="edge68" class="edge">
<title>prose_51&#45;&gt;raw_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4731.7822,-560.3841C4738.4486,-535.5472 4750.6018,-490.2688 4758.4855,-460.8971"/>
<polygon fill="#000000" stroke="#000000" points="4761.9667,-461.4285 4761.1787,-450.863 4755.206,-459.6138 4761.9667,-461.4285"/>
</g>
<!-- raw_72 -->
<g id="node73" class="node">
<title>raw_72</title>
<ellipse fill="none" stroke="#000000" cx="4839" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4839" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_72 -->
<g id="edge72" class="edge">
<title>prose_52&#45;&gt;raw_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4925.8162,-562.0639C4911.7294,-546.6526 4890.643,-522.4285 4875,-499.4007 4866.3585,-486.6796 4858.0876,-471.6766 4851.6576,-459.1435"/>
<polygon fill="#000000" stroke="#000000" points="4854.7407,-457.4838 4847.1238,-450.1195 4848.4858,-460.6264 4854.7407,-457.4838"/>
</g>
<!-- literal_73 -->
<g id="node74" class="node">
<title>literal_73</title>
<ellipse fill="none" stroke="#000000" cx="4915" cy="-432.9006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4915" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_52&#45;&gt;literal_73 -->
<g id="edge73" class="edge">
<title>prose_52&#45;&gt;literal_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4937.7597,-560.0921C4933.3223,-535.2942 4925.3099,-490.5169 4920.0731,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="4923.488,-460.4645 4918.2812,-451.2374 4916.5974,-461.6975 4923.488,-460.4645"/>
</g>
<!-- raw_74 -->
<g id="node75" class="node">
<title>raw_74</title>
<ellipse fill="none" stroke="#000000" cx="4991" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4991" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_74 -->
<g id="edge74" class="edge">
<title>prose_52&#45;&gt;raw_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4947.131,-560.3841C4955.7152,-535.4383 4971.3955,-489.8712 4981.4986,-460.5115"/>
<polygon fill="#000000" stroke="#000000" points="4984.8745,-461.4577 4984.8189,-450.863 4978.2554,-459.1799 4984.8745,-461.4577"/>
</g>
<!-- literal_75 -->
<g id="node76" class="node">
<title>literal_75</title>
<ellipse fill="none" stroke="#000000" cx="5067" cy="-432.9006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="5067" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_52&#45;&gt;literal_75 -->
<g id="edge75" class="edge">
<title>prose_52&#45;&gt;literal_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4959.9072,-563.5713C4978.382,-548.6898 5006.6218,-524.3296 5027,-499.4007 5036.9885,-487.1816 5046.2111,-472.2212 5053.2773,-459.5866"/>
<polygon fill="#000000" stroke="#000000" points="5056.5364,-460.9195 5058.2376,-450.4621 5050.3864,-457.5762 5056.5364,-460.9195"/>
</g>
<!-- raw_76 -->
<g id="node77" class="node">
<title>raw_76</title>
<ellipse fill="none" stroke="#000000" cx="5143" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="5143" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_76 -->
<g id="edge76" class="edge">
<title>prose_52&#45;&gt;raw_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4960.8467,-563.8832C4973.8359,-554.9317 4991.4156,-543.5889 5008,-535.4007 5049.9808,-514.6735 5071.5461,-529.9788 5107,-499.4007 5119.0797,-488.9822 5127.8026,-473.4724 5133.6339,-460.0515"/>
<polygon fill="#000000" stroke="#000000" points="5136.8902,-461.3346 5137.3755,-450.7509 5130.3961,-458.7219 5136.8902,-461.3346"/>
</g>
<!-- raw_82 -->
<g id="node83" class="node">
<title>raw_82</title>
<ellipse fill="none" stroke="#000000" cx="5215" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="5215" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_82 -->
<g id="edge82" class="edge">
<title>prose_53&#45;&gt;raw_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5074.9589,-567.4782C5103.3692,-554.6973 5148.8764,-531.0298 5179,-499.4007 5189.7503,-488.113 5198.2727,-472.9907 5204.3212,-460.0189"/>
<polygon fill="#000000" stroke="#000000" points="5207.6341,-461.1803 5208.4603,-450.6177 5201.2275,-458.3596 5207.6341,-461.1803"/>
</g>
<!-- raw_84 -->
<g id="node85" class="node">
<title>raw_84</title>
<ellipse fill="none" stroke="#000000" cx="5287" cy="-432.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="5287" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_54&#45;&gt;raw_84 -->
<g id="edge84" class="edge">
<title>prose_54&#45;&gt;raw_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5198.6922,-562.1431C5213.24,-546.7877 5234.9885,-522.6014 5251,-499.4007 5259.735,-486.7436 5268.0138,-471.746 5274.4249,-459.2"/>
<polygon fill="#000000" stroke="#000000" points="5277.6013,-460.6731 5278.94,-450.1632 5271.3394,-457.5444 5277.6013,-460.6731"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="5565.5,-499.4007 5332.5,-499.4007 5332.5,-366.4004 5565.5,-366.4004 5565.5,-499.4007"/>
<text text-anchor="middle" x="5449" y="-468.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local DROP = {}</text>
<text text-anchor="middle" x="5449" y="-436.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">elpatt.DROP = DROP</text>
<text text-anchor="middle" x="5449" y="-405.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function elpatt.D(patt)</text>
<text text-anchor="middle" x="5449" y="-390.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return (patt / 0) * Cc(DROP)</text>
<text text-anchor="middle" x="5449" y="-374.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_55&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>codeblock_55&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5388.5994,-560.0921C5394.8992,-546.826 5403.9143,-527.842 5413.0643,-508.5739"/>
<polygon fill="#000000" stroke="#000000" points="5416.2834,-509.9543 5417.4115,-499.4196 5409.9601,-506.9514 5416.2834,-509.9543"/>
</g>
<!-- header_87 -->
<g id="node88" class="node">
<title>header_87</title>
<ellipse fill="none" stroke="#000000" cx="6624" cy="-432.9006" rx="81.2629" ry="18"/>
<text text-anchor="middle" x="6624" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : S : Capture set</text>
</g>
<!-- section_56&#45;&gt;header_87 -->
<g id="edge87" class="edge">
<title>section_56&#45;&gt;header_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6739.8142,-560.3841C6716.657,-534.8936 6673.9392,-487.8715 6647.3579,-458.612"/>
<polygon fill="#000000" stroke="#000000" points="6649.633,-455.9112 6640.3182,-450.863 6644.4518,-460.6182 6649.633,-455.9112"/>
</g>
<!-- prose_88 -->
<g id="node89" class="node">
<title>prose_88</title>
<ellipse fill="none" stroke="#000000" cx="6756" cy="-432.9006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6756" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_56&#45;&gt;prose_88 -->
<g id="edge88" class="edge">
<title>section_56&#45;&gt;prose_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6756,-560.0921C6756,-535.2942 6756,-490.5169 6756,-461.2517"/>
<polygon fill="#000000" stroke="#000000" points="6759.5001,-461.2373 6756,-451.2374 6752.5001,-461.2374 6759.5001,-461.2373"/>
</g>
<!-- codeblock_89 -->
<g id="node90" class="node">
<title>codeblock_89</title>
<ellipse fill="none" stroke="#000000" cx="6899" cy="-432.9006" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="6899" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 92&#45;102</text>
</g>
<!-- section_56&#45;&gt;codeblock_89 -->
<g id="edge89" class="edge">
<title>section_56&#45;&gt;codeblock_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6773.2491,-560.6741C6798.3434,-535.1763 6845.066,-487.7021 6873.9525,-458.351"/>
<polygon fill="#000000" stroke="#000000" points="6876.7212,-460.5275 6881.2411,-450.9451 6871.7321,-455.6174 6876.7212,-460.5275"/>
</g>
<!-- codeblock_90 -->
<g id="node91" class="node">
<title>codeblock_90</title>
<ellipse fill="none" stroke="#000000" cx="7094" cy="-432.9006" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7094" y="-428.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 104&#45;106</text>
</g>
<!-- section_56&#45;&gt;codeblock_90 -->
<g id="edge90" class="edge">
<title>section_56&#45;&gt;codeblock_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6805.7679,-565.2661C6854.1012,-551.8259 6928.9213,-528.6692 6990,-499.4007 7015.2531,-487.2995 7041.821,-470.2271 7061.7828,-456.4107"/>
<polygon fill="#000000" stroke="#000000" points="7064.0079,-459.1253 7070.1851,-450.5176 7059.9883,-453.3943 7064.0079,-459.1253"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="3255.5,-254.1006 2714.5,-254.1006 2714.5,-167.6999 3255.5,-167.6999 3255.5,-254.1006"/>
<text text-anchor="middle" x="2985" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We discourage the use of captures in the Node class. &#160;The architecture</text>
<text text-anchor="middle" x="2985" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">requires that all array values of a Node table be themselves Nodes. This is</text>
<text text-anchor="middle" x="2985" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">frequently checked for, in that we use </text>
</g>
<!-- raw_58&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_58&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3297.4439,-415.3323C3291.3298,-400.8142 3281.0399,-380.3871 3267,-366.4005 3221.0398,-320.6148 3158.8064,-284.3875 3104.4948,-258.4605"/>
<polygon fill="#000000" stroke="#000000" points="3105.6916,-255.1555 3095.1531,-254.0643 3102.7109,-261.4892 3105.6916,-255.1555"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="3332,-228.9003 3274,-228.9003 3274,-192.9003 3332,-192.9003 3332,-228.9003"/>
<text text-anchor="middle" x="3303" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">isNode</text>
</g>
<!-- literal_59&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>literal_59&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3372.9347,-415.2341C3364.8803,-394.8938 3351.4755,-360.4217 3341,-330.4005 3330.1429,-299.2856 3318.8391,-263.185 3311.4129,-238.874"/>
<polygon fill="#000000" stroke="#000000" points="3314.7373,-237.7757 3308.4803,-229.2257 3308.0398,-239.8114 3314.7373,-237.7757"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="3562,-230.2008 3350,-230.2008 3350,-191.5997 3562,-191.5997 3562,-230.2008"/>
<text text-anchor="middle" x="3456" y="-215.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> to filter in iterators etc,</text>
<text text-anchor="middle" x="3456" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">but this is defensive. </text>
</g>
<!-- raw_60&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>raw_60&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3456,-414.7334C3456,-376.4008 3456,-286.9519 3456,-240.3354"/>
<polygon fill="#000000" stroke="#000000" points="3459.5001,-240.2658 3456,-230.2659 3452.5001,-240.2659 3459.5001,-240.2658"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4121.5,-246.1006 3580.5,-246.1006 3580.5,-175.6999 4121.5,-175.6999 4121.5,-246.1006"/>
<text text-anchor="middle" x="3851" y="-214.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">The use of SUPPRESS lets us drop rules that we don&#39;t want to see in the</text>
<text text-anchor="middle" x="3851" y="-199.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">final AST. &#160;A normal approach to parsing has explicit captures, but this is</text>
<text text-anchor="middle" x="3851" y="-184.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">inelegant compared to treating any Node without children as a leaf.</text>
</g>
<!-- raw_64&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>raw_64&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4120.0469,-419.0135C4077.7394,-386.2878 3970.4217,-303.2754 3904.8251,-252.5351"/>
<polygon fill="#000000" stroke="#000000" points="3906.697,-249.5582 3896.6457,-246.2082 3902.4141,-255.095 3906.697,-249.5582"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="4632,-238.2007 4140,-238.2007 4140,-183.5998 4632,-183.5998 4632,-238.2007"/>
<text text-anchor="middle" x="4386" y="-207.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">What about regions of text that don&#39;t interest us? &#160;Canonically this</text>
<text text-anchor="middle" x="4386" y="-191.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">includes whitespace. &#160;For those occasions, we have </text>
</g>
<!-- raw_66&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>raw_66&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4489.2115,-415.4806C4471.0337,-379.4495 4428.9636,-296.0605 4404.5161,-247.6019"/>
<polygon fill="#000000" stroke="#000000" points="4407.503,-245.7519 4399.8739,-238.4003 4401.2533,-248.905 4407.503,-245.7519"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="4722,-228.9003 4650,-228.9003 4650,-192.9003 4722,-192.9003 4722,-228.9003"/>
<text text-anchor="middle" x="4686" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">elpatt.D</text>
</g>
<!-- literal_67&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>literal_67&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4687.8363,-414.7334C4687.4883,-376.098 4686.6724,-285.5357 4686.2553,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="4689.7532,-238.9752 4686.1631,-229.0072 4682.7535,-239.0383 4689.7532,-238.9752"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4794,-228.9003 4740,-228.9003 4740,-192.9003 4794,-192.9003 4794,-228.9003"/>
<text text-anchor="middle" x="4767" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">. </text>
</g>
<!-- raw_68&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>raw_68&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4766.0818,-414.7334C4766.2559,-376.098 4766.6638,-285.5357 4766.8723,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="4770.3733,-239.0229 4766.9184,-229.0072 4763.3733,-238.9913 4770.3733,-239.0229"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="4866,-228.9003 4812,-228.9003 4812,-192.9003 4866,-192.9003 4866,-228.9003"/>
</g>
<!-- raw_72&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>raw_72&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4839,-414.7334C4839,-376.098 4839,-285.5357 4839,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="4842.5001,-239.0071 4839,-229.0072 4835.5001,-239.0072 4842.5001,-239.0071"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="4938,-228.9003 4884,-228.9003 4884,-192.9003 4938,-192.9003 4938,-228.9003"/>
<text text-anchor="middle" x="4911" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">D</text>
</g>
<!-- literal_73&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>literal_73&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4914.6727,-414.7334C4913.9765,-376.098 4912.3448,-285.5357 4911.5106,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="4915.0059,-238.9424 4911.3262,-229.0072 4908.0071,-239.0686 4915.0059,-238.9424"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="5455.5,-230.2008 4956.5,-230.2008 4956.5,-191.5997 5455.5,-191.5997 5455.5,-230.2008"/>
<text text-anchor="middle" x="5206" y="-215.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> needs to take a pattern, and if it succeeds in matching it, return a</text>
<text text-anchor="middle" x="5206" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">special table, while discarding the captures if any. In </text>
</g>
<!-- raw_74&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>raw_74&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4998.3257,-415.4738C5004.7122,-401.4168 5014.8453,-381.5592 5027,-366.4005 5069.1358,-313.8512 5130.5347,-264.9509 5169.3587,-236.5027"/>
<polygon fill="#000000" stroke="#000000" points="5171.723,-239.1116 5177.762,-230.4063 5167.6124,-233.4456 5171.723,-239.1116"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="5532,-228.9003 5474,-228.9003 5474,-192.9003 5532,-192.9003 5532,-228.9003"/>
<text text-anchor="middle" x="5503" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">define</text>
</g>
<!-- literal_75&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>literal_75&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5072.6437,-414.9318C5078.5598,-399.3162 5089.4751,-377.5074 5107,-366.4005 5174.3487,-323.7164 5401.8955,-380.4085 5464,-330.4005 5491.1607,-308.53 5499.6096,-267.4048 5502.1238,-239.5822"/>
<polygon fill="#000000" stroke="#000000" points="5505.6379,-239.5008 5502.8412,-229.2818 5498.6548,-239.0144 5505.6379,-239.5008"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="5951.5,-238.2007 5550.5,-238.2007 5550.5,-183.5998 5951.5,-183.5998 5951.5,-238.2007"/>
<text text-anchor="middle" x="5751" y="-223.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">, we will</text>
<text text-anchor="middle" x="5751" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">check for this table, and drop it whenever encountered.</text>
</g>
<!-- raw_76&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>raw_76&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5147.5734,-414.9741C5152.5572,-399.3869 5162.1652,-377.5961 5179,-366.4005 5246.3148,-321.6341 5463.9688,-354.926 5541,-330.4005 5602.0127,-310.9751 5664.927,-272.2294 5705.7836,-244.1095"/>
<polygon fill="#000000" stroke="#000000" points="5707.9498,-246.8662 5714.1585,-238.2811 5703.9513,-241.1206 5707.9498,-246.8662"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="6272.5,-230.8023 5969.5,-230.8023 5969.5,-190.9982 6272.5,-190.9982 6272.5,-230.8023"/>
<text text-anchor="middle" x="6121" y="-199.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; patt : &#160;The pattern to match and drop</text>
</g>
<!-- raw_82&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>raw_82&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5219.3519,-415.084C5224.2215,-399.3443 5233.7882,-377.2556 5251,-366.4005 5384.4371,-282.2442 5811.5172,-383.698 5960,-330.4005 6014.1354,-310.9687 6065.4606,-266.8373 6095.0504,-237.9862"/>
<polygon fill="#000000" stroke="#000000" points="6097.8148,-240.1739 6102.4488,-230.6462 6092.8846,-235.2046 6097.8148,-240.1739"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="6531,-230.8023 6291,-230.8023 6291,-190.9982 6531,-190.9982 6531,-230.8023"/>
<text text-anchor="middle" x="6411" y="-199.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; #return : Special table DROP</text>
</g>
<!-- raw_84&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>raw_84&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5291.3187,-415.0309C5296.1654,-399.2547 5305.7171,-377.142 5323,-366.4005 5413.4699,-310.1722 6182.4973,-370.9424 6281,-330.4005 6327.4435,-311.2852 6367.6839,-267.6955 6390.6401,-238.7849"/>
<polygon fill="#000000" stroke="#000000" points="6393.5562,-240.736 6396.9224,-230.6901 6388.0262,-236.4442 6393.5562,-240.736"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6698.5,-228.9003 6549.5,-228.9003 6549.5,-192.9003 6698.5,-192.9003 6698.5,-228.9003"/>
<text text-anchor="middle" x="6624" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">*** S : Capture set</text>
</g>
<!-- header_87&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>header_87&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6624,-414.7334C6624,-376.098 6624,-285.5357 6624,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="6627.5001,-239.0071 6624,-229.0072 6620.5001,-239.0072 6627.5001,-239.0071"/>
</g>
<!-- raw_92 -->
<g id="node93" class="node">
<title>raw_92</title>
<ellipse fill="none" stroke="#000000" cx="6744" cy="-210.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="6744" y="-206.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_88&#45;&gt;raw_92 -->
<g id="edge92" class="edge">
<title>prose_88&#45;&gt;raw_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6755.018,-414.7334C6752.9296,-376.098 6748.0343,-285.5357 6745.5318,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="6749.0135,-238.8036 6744.9787,-229.0072 6742.0237,-239.1815 6749.0135,-238.8036"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="7029,-276.6007 6789,-276.6007 6789,-145.1999 7029,-145.1999 7029,-276.6007"/>
<text text-anchor="middle" x="6909" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">function elpatt.S(a, ...)</text>
<text text-anchor="middle" x="6909" y="-245.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local arg = {...}</text>
<text text-anchor="middle" x="6909" y="-230.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local set = P(a)</text>
<text text-anchor="middle" x="6909" y="-215.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _, patt in ipairs(arg) do</text>
<text text-anchor="middle" x="6909" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;set = set + P(patt)</text>
<text text-anchor="middle" x="6909" y="-184.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6909" y="-168.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return set</text>
<text text-anchor="middle" x="6909" y="-153.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_89&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>codeblock_89&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6899.8183,-414.7334C6901.0673,-387.0065 6903.5209,-332.5357 6905.5777,-286.875"/>
<polygon fill="#000000" stroke="#000000" points="6909.0832,-286.829 6906.0369,-276.6816 6902.0903,-286.5139 6909.0832,-286.829"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="7154.5,-228.9003 7047.5,-228.9003 7047.5,-192.9003 7154.5,-192.9003 7154.5,-228.9003"/>
<text text-anchor="middle" x="7101" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return elpatt</text>
</g>
<!-- codeblock_90&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>codeblock_90&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7094.5728,-414.7334C7095.7911,-376.098 7098.6466,-285.5357 7100.1064,-239.2388"/>
<polygon fill="#000000" stroke="#000000" points="7103.6121,-239.1125 7100.4291,-229.0072 7096.6155,-238.8919 7103.6121,-239.1125"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="6771,-45.7 6717,-45.7 6717,-9.7 6771,-9.7 6771,-45.7"/>
</g>
<!-- raw_92&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>raw_92&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6744,-192.6646C6744,-160.7037 6744,-94.3538 6744,-56.2575"/>
<polygon fill="#000000" stroke="#000000" points="6747.5001,-55.8619 6744,-45.862 6740.5001,-55.862 6747.5001,-55.8619"/>
</g>
</g>
</svg>